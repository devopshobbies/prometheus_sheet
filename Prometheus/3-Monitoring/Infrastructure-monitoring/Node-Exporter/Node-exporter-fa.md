
ุงฺฉุณูพูุฑุชูุฑ ููุฏ  (Node Exporter) ุงุญุชูุงูุงู ฺฉ ุงุฒ ุงููู ุงฺฉุณูพูุฑุชุฑูุง ุงุณุช ฺฉู ุงุณุชูุงุฏู ุฎูุงูุฏ ฺฉุฑุฏุ ููุงูุทูุฑ ฺฉู ูุจูุงู ูุดุงูุฏู ุดุฏ. ุงู ุงฺฉุณูพูุฑุชุฑ ูุชุฑฺฉโูุง ุณุทุญ ูุงุดู ุฑุงุ ุนูุฏุชุงู ุงุฒ ูุณุชู ุณุณุชู ุนุงูู ุดูุงุ ูุงููุฏ CPUุ ุญุงูุธูุ ูุถุง ุฏุณฺฉุ ูุฑูุฏ/ุฎุฑูุฌ ุฏุณฺฉุ ูพููุง ุจุงูุฏ ุดุจฺฉู ู ุฏูุง ูุงุฏุฑุจุฑุฏุ ุฏุฑ ูุนุฑุถ ููุงุด ูุฑุงุฑ ูโุฏูุฏ. ุงฺฉุณูพูุฑุชุฑ ููุฏ ุจุง ุณุณุชูโูุง ููฺฉุณ ุงุณุชูุงุฏู ูโุดูุฏุ ฺฉุงุฑุจุฑุงู ููุฏูุฒ ุจุงุฏ ุจู ุฌุง ุขู ุงุฒ ุงฺฉุณูพูุฑุชุฑ ููุฏูุฒยฒ (Windows Exporter) ุงุณุชูุงุฏู ฺฉููุฏ. ุงฺฉุณูพูุฑุชุฑ ููุฏ ููุท ุจุฑุง ูุธุงุฑุช ุจุฑ ุฎูุฏ ูุงุดู ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุดุฏู ุงุณุชุ ูู ูุฑุขูุฏูุง ุง ุณุฑูุณโูุง ูููุฑุฏ ุฑู ุขู. ุณุงุฑ ุณุณุชูโูุง ูุงูุชูุฑูฺฏ ุงุบูุจ ฺุฒ ุฏุงุฑูุฏ ฺฉู ูุง ุฏูุณุช ุฏุงุฑู ุขู ุฑุง ยซุนุงูู ุฌุงูุนยป (uberagent) ุจูุงููุ ุนู ฺฉ ูุฑุขูุฏ ูุงุญุฏ ฺฉู ููู ฺุฒ ุฑุง ุฑู ูุงุดู ูุธุงุฑุช ูโฺฉูุฏ. ุฏุฑ ูุนูุงุฑ ูพุฑููุชุฆูุณ (Prometheus)ุ ูุฑ ฺฉ ุงุฒ ุณุฑูุณโูุง ุดูุง ูุชุฑฺฉโูุง ุฎูุฏ ุฑุงุ ุฏุฑ ุตูุฑุช ูุงุฒ ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉ ุงฺฉุณูพูุฑุชุฑุ ุฏุฑ ูุนุฑุถ ููุงุด ูุฑุงุฑ ูโุฏููุฏ ฺฉู ุณูพุณ ูุณุชููุงู ุชูุณุท ูพุฑููุชุฆูุณ ุงุณฺฉุฑููพ (scrape) ูโุดูุฏ. ุงู ฺฉุงุฑ ุงุฒ ุชุจุฏู ุดุฏู ุนุงูู ุฌุงูุน ุจู ฺฉ ฺฏููฺฏุงู ุนููุงุช ุง ุนููฺฉุฑุฏ ุฌููฺฏุฑ ูโฺฉูุฏ ู ุจู ุดูุง ุงูฺฉุงู ูโุฏูุฏ ุจู ุฌุง ูุงุดูโูุงุ ุจุดุชุฑ ุฏุฑ ูุงูุจ ุณุฑูุณโูุง ูพูุง ูฺฉุฑ ฺฉูุฏ.

ุฏุณุชูุฑุงูุนููโูุง ฺฉู ููฺฏุงู ุงุฌุงุฏ ูุชุฑฺฉโูุง ุจุง ุงุจุฒุงุฑ ุฏูู ูุณุชูู (direct instrumentation)ุ ูุงููุฏ ููุงุฑุฏ ููุฑุฏ ุจุญุซ ุฏุฑ ยซูุชุฑฺฉโูุงู ุฑุง ฺู ูุงูโฺฏุฐุงุฑ ฺฉููุยป  ุจุงุฏ ุงุณุชูุงุฏู ฺฉูุฏุ ูุณุจุชุงู ูุงุถุญ ูุณุชูุฏ. ุงู ููุฑุฏ ุฏุฑ ููุฑุฏ ุงฺฉุณูพูุฑุชุฑูุง ุตุฏู ููโฺฉูุฏุ ุฌุง ฺฉู ุจูุง ุจู ุชุนุฑูุ ุฏุงุฏูโูุง ุงุฒ ููุจุน ูโุขูุฏ ฺฉู ุจุง ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุฏุณุชูุฑุงูุนููโูุง ูพุฑููุชุฆูุณ ุทุฑุงุญ ูุดุฏู ุงุณุช. ุจุณุชู ุจู ุญุฌู ู ฺฉูุช ูุชุฑฺฉโูุงุ ุชูุณุนูโุฏููุฏฺฏุงู ุงฺฉุณูพูุฑุชุฑ ุจุงุฏ ุจู ุชูุงุด ูููุฏุณ ู ุจู ุฏุณุช ุขูุฑุฏู ูุชุฑฺฉโูุง ุนุงูุ ูุตุงูุญูโูุง ุงูุฌุงู ุฏููุฏ. ุฏุฑ ููุฑุฏ ูููฺฉุณุ ูุฒุงุฑุงู ูุชุฑฺฉ ุฏุฑ ุฏุณุชุฑุณ ุงุณุช. ุจุฑุฎ ุจู ุฎูุจ ูุณุชูุฏ ู ุฏุฑฺฉ ุดุฏูโุงูุฏุ ูุงููุฏ ุงุณุชูุงุฏู ุงุฒ CPUุ ุจุฑุฎ ุฏฺฏุฑุ ูุงููุฏ ุงุณุชูุงุฏู ุงุฒ ุญุงูุธูุ ุจุง ุชุบุฑ ูพุงุฏูโุณุงุฒ ุงุฒ ูุณุฎูโุง ุจู ูุณุฎู ุฏฺฏุฑ ูุณุชู ูุชูุงูุช ุจูุฏูโุงูุฏ. ุญุช ูุชุฑฺฉโูุง ุฑุง ุฎูุงูุฏ ุงูุช ฺฉู ฺฉุงููุงู ุจุฏูู ูุณุชูุฏุงุช ูุณุชูุฏุ ุฌุง ฺฉู ุจุฑุง ูููุฏู ฺฉุงุฑฺฉุฑุฏ ุขูโูุง ุจุงุฏ ฺฉุฏ ููุจุน ูุณุชู ุฑุง ุจุฎูุงูุฏ. ุงฺฉุณูพูุฑุชุฑ ููุฏ ุทูุฑ ุทุฑุงุญ ุดุฏู ุงุณุช ฺฉู ุจู ุนููุงู ฺฉุงุฑุจุฑ ุบุฑ ุฑูุช (non-root) ุงุฌุฑุง ุดูุฏ ู ุจุงุฏ ูุณุชููุงู ุฑู ูุงุดู ุจู ููุงู ุฑูุด ฺฉู ฺฉ ุฏููู (daemon) ุณุณุชู ูุงููุฏ sshd ุง cron ุฑุง ุงุฌุฑุง ูโฺฉูุฏุ ุงุฌุฑุง ุดูุฏ.

ุฏุฑ ุญุงู ฺฉู ุงุฌุฑุง ุงฺฉุณูพูุฑุชุฑ ููุฏ ุฏุฑ ุฏุงุฎู ุฏุงฺฉุฑยณ (Docker) ุงูฺฉุงูโูพุฐุฑ ุงุณุชุ ุจุฑุง ูุงูุช (mount) ฺฉุฑุฏู ูุงู ุณุณุชู ูุฒุจุงู ุฏุฑ ุฏุงุฎู ฺฉุงูุชูุฑุ ุจุงุฏ ุงุฒ ุจุฑุฎ ูุงูููโูุง (volumes) ู ูพุงุฑุงูุชุฑูุง ุฎุท ูุฑูุงู (`--path.procfs`, `--path.rootfs`, `--path.sysfs`) ุงุณุชูุงุฏู ฺฉูุฏ. ุฏุฑ ุตูุฑุช ุงูฺฉุงูุ ุงฺฉุณูพูุฑุชุฑ ููุฏ ุฑุง ุจู ุนููุงู ฺฉ ุณุฑูุณ ุฑู ููุฏุ ุจุฏูู ุฏุงฺฉุฑ ุงุฌุฑุง ฺฉูุฏ. ุฏุงฺฉุฑ ุชูุงุด ูโฺฉูุฏ ุชุง ฺฉ ฺฉุงูุชูุฑ ุฑุง ุงุฒ ุนููฺฉุฑุฏ ุฏุงุฎู ูุงุดู ุฌุฏุง ฺฉูุฏุ ฺฉู ุงู ุจุง ุชูุงุด ุงฺฉุณูพูุฑุชุฑ ููุฏ ุจุฑุง ุฏุณุชุฑุณ ุจู ุขู ุนููฺฉุฑุฏูุง ุฏุงุฎู ุจู ุฎูุจ ฺฉุงุฑ ููโฺฉูุฏ.

ุจุฑุฎูุงู ุงฺฉุซุฑ ุงฺฉุณูพูุฑุชุฑูุง ุฏฺฏุฑุ ุจู ุฏูู ุชููุน ฺฏุณุชุฑุฏู ูุชุฑฺฉโูุง ููุฌูุฏ ุงุฒ ุณุณุชูโุนุงููโูุงุ ุงฺฉุณูพูุฑุชุฑ ููุฏ ุจู ุดูุง ุงูฺฉุงู ูโุฏูุฏ ูพฺฉุฑุจูุฏ ฺฉูุฏ ฺฉู ฺฉุฏุงู ุฏุณุชูโุจูุฏ ุงุฒ ูุชุฑฺฉโูุง ุฑุง ุฌูุนโุขูุฑ ฺฉูุฏ. ูโุชูุงูุฏ ุงู ฺฉุงุฑ ุฑุง ุจุง ููฺฏโูุง ุฎุท ูุฑูุงู ูุงููุฏ `--collector.wifi` ฺฉู ฺฉุงูฺฉุชูุฑ (collector) ูุงโูุง ุฑุง ูุนุงู ูโฺฉูุฏุ ู `--no-collector.wifi` ฺฉู ุขู ุฑุง ุบุฑูุนุงู ูโฺฉูุฏุ ุงูุฌุงู ุฏูุฏ. `--collector.disable-defaults` ููู ฺฉุงูฺฉุชูุฑูุง ุฑุง ุจู ุฌุฒ ุขูโูุง ฺฉู ุจู ุตุฑุงุญุช ุจุง ููฺฏโูุง ุฎุท ูุฑูุงู ูุนุงู ุดุฏูโุงูุฏุ ุบุฑูุนุงู ูโฺฉูุฏ. ูพุดโูุฑุถโูุง ูุนููู ุชูุธู ุดุฏูโุงูุฏุ ุจูุงุจุฑุงู ุงู ฺุฒ ูุณุช ฺฉู ุฏุฑ ุดุฑูุน ฺฉุงุฑ ูฺฏุฑุงู ุขู ุจุงุดุฏ. ูุณุชูโูุง ูุฎุชูู ูุชุฑฺฉโูุง ูุชูุงูุช ุฑุง ุฏุฑ ูุนุฑุถ ููุงุด ูุฑุงุฑ ูโุฏููุฏุ ุฒุฑุงุ ุจู ุนููุงู ูุซุงูุ ูููฺฉุณ ู FreeBSD ฺฉุงุฑูุง ุฑุง ุจู ุฑูุดโูุง ูุชูุงูุช ุงูุฌุงู ูโุฏููุฏ. ููฺฉู ุงุณุช ูุชุฑฺฉโูุง ุจุง ฺฏุฐุดุช ุฒูุงู ู ุจุง ุจุงุฒุณุงุฒ (refactor) ุงฺฉุณูพูุฑุชุฑ ููุฏ ุจู ฺฉุงูฺฉุชูุฑูุง ุฌุงุจุฌุง ุดููุฏ. ุงฺฏุฑ ุงุฒ ุณุณุชู ููฺฉุณ ุฏฺฏุฑ ุงุณุชูุงุฏู ูโฺฉูุฏุ ูุชูุฌู ุฎูุงูุฏ ุดุฏ ฺฉู ูุชุฑฺฉโูุง ู ฺฉุงูฺฉุชูุฑูุง ุงุฑุงุฆู ุดุฏู ูุชูุงูุช ูุณุชูุฏ. ุฏุฑ ุงู ูุตูุ ูุง ุจุฑุฎ ุงุฒ ูุชุฑฺฉโูุง ฺฉูุฏ ุฑุง ฺฉู ุงฺฉุณูพูุฑุชุฑ ููุฏ ูุณุฎู 1.4.0 ุจุง ูุณุชู ูููฺฉุณ 5.18.0 ุฏุฑ ูุนุฑุถ ููุงุด ูุฑุงุฑ ูโุฏูุฏุ ุชูุถุญ ูโุฏูู. ุงู ูุฑุงุฑ ูุณุช ูุณุช ฺฉุงูู ุงุฒ ูุชุฑฺฉโูุง ููุฌูุฏ ุจุงุดุฏ. ูุงููุฏ ุงฺฉุซุฑ ุงฺฉุณูพูุฑุชุฑูุง ู ุจุฑูุงููโูุงุ ุดูุง ูโุฎูุงูุฏ ูุณุฑ `/metrics` ุฑุง ุจุฑุฑุณ ฺฉูุฏ ุชุง ุจุจูุฏ ฺู ฺุฒ ุฏุฑ ุฏุณุชุฑุณ ุงุณุช. ูโุชูุงูุฏ ุนุจุงุฑุงุช PromQL ููููู ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ุชูุธูุงุช ุฎูุฏ ุงุฒ ูุตูโูุง ูุจู ุงูุชุญุงู ฺฉูุฏ.

## ฺฉุงูฺฉุชูุฑ CPU

ูุชุฑฺฉ ุงุตู ุงุฒ ฺฉุงูฺฉุชูุฑ CPUุ `node_cpu_seconds_total` ุงุณุชุ ฺฉู ฺฉ ุดูุงุฑูุฏู (counter) ุงุณุช ฺฉู ูุดุงู ูโุฏูุฏ ูุฑ CPU ฺูุฏุฑ ุฒูุงู ุฏุฑ ูุฑ ุญุงูุช (mode) ุตุฑู ฺฉุฑุฏู ุงุณุช. ูุจูโูุง (labels) `cpu` ู `mode` ูุณุชูุฏ:

```
# HELP node_cpu_seconds_total Seconds the CPUs spent in each mode.
# TYPE node_cpu_seconds_total counter
node_cpu_seconds_total{cpu="0",mode="idle"} 13024.48
node_cpu_seconds_total{cpu="0",mode="iowait"} 9.53
node_cpu_seconds_total{cpu="0",mode="irq"} 0
node_cpu_seconds_total{cpu="0",mode="nice"} 0.11
node_cpu_seconds_total{cpu="0",mode="softirq"} 109.74
node_cpu_seconds_total{cpu="0",mode="steal"} 0
node_cpu_seconds_total{cpu="0",mode="system"} 566.67
node_cpu_seconds_total{cpu="0",mode="user"} 1220.36
node_cpu_seconds_total{cpu="1",mode="idle"} 13501.28
node_cpu_seconds_total{cpu="1",mode="iowait"} 5.96
node_cpu_seconds_total{cpu="1",mode="irq"} 0
node_cpu_seconds_total{cpu="1",mode="nice"} 0.09
node_cpu_seconds_total{cpu="1",mode="softirq"} 23.74
node_cpu_seconds_total{cpu="1",mode="steal"} 0
node_cpu_seconds_total{cpu="1",mode="system"} 423.84
node_cpu_seconds_total{cpu="1",mode="user"} 936.05
```


ุฏุฑ ูููฺฉุณุ **ุญุงูุชโูุง (ููุฏูุง) ูุฎุชูู CPU** ูุฑุจูุท ุจู **ุชูุณูโุจูุฏ ุฒูุงู ู ุงูููุชโุจูุฏ ูพุฑุฏุงุฒุดโูุง** ูุณุชูุฏ ฺฉู ุฏุฑ ฺฏุฒุงุฑุดโูุง ูุงูุชูุฑูฺฏ (ูุซู `top`ุ `htop`ุ `mpstat` ู ...) ููุงุด ุฏุงุฏู ูโุดููุฏ. ุงู ููุฏูุง ูุดุงู ูโุฏููุฏ ฺฉู CPU ุฏุฑ ูุฑ ูุญุธู ูุดุบูู ฺู ููุน ฺฉุงุฑ ุงุณุช.  



### ๐ **ููุฏูุง ุงุตู CPU ุฏุฑ ฺฏุฒุงุฑุดโูุง ูููฺฉุณ** (ูุทุงุจู ุฎุฑูุฌ `mpstat` ู `top`)
ุงู ููุฏูุง ูุดุงู ูโุฏููุฏ **CPU ุฒูุงู ุฎูุฏ ุฑุง ฺฺฏููู ุชูุณู ฺฉุฑุฏู ุงุณุช**:

| ููุฏ CPU       | ุชูุถุญ                                                                    | ูุซุงูโูุง ุงุฒ ฺฉุงุฑุจุฑุฏ                        |
| ------------- | ------------------------------------------------------------------------ | ------------------------------------------ |
| **`user`**    | ุฒูุงู ูพุฑุฏุงุฒุด ุจุฑูุงููโูุง **ฺฉุงุฑุจุฑุงู ุนุงุฏ** (User Mode)                      | ุงุฌุฑุง `firefox`ุ `nginx`ุ ุจุฑูุงููโูุง ฺฉุงุฑุจุฑ |
| **`nice`**    | ุฒูุงู ูพุฑุฏุงุฒุด ุจุฑูุงููโูุง **ุจุง ูุณ (Nice) ูพุงู/ุจุงูุง** (ุงูููุช ุชุบุฑ ุงูุชู) | ูพุฑุฏุงุฒุดโูุง ฺฉูโุงูููุช ูุซู `backup`          |
| **`system`**  | ุฒูุงู ูพุฑุฏุงุฒุด **ูุณุชู (Kernel Mode)**                                       | ูุฏุฑุช ุณุณุชูโฺฉุงูโูุงุ ุฏุฑุงูุฑูุง ุณุฎุชโุงูุฒุงุฑ   |
| **`irq`**     | ุฒูุงู ูพุฑุฏุงุฒุด **ููููโูุง ุณุฎุชโุงูุฒุงุฑ (Interrupts)**                         | ูพุฑุฏุงุฒุด ููููโูุง ุตูุญูโฺฉูุฏุ ุดุจฺฉูุ ุฏุณฺฉ      |
| **`softirq`** | ุฒูุงู ูพุฑุฏุงุฒุด **ููููโูุง ูุฑูโุงูุฒุงุฑ (Software Interrupts)**                | ูพุฑุฏุงุฒุด ุจุณุชูโูุง ุดุจฺฉู (`NET_RX`ุ `TASKLET`) |
| **`iowait`**  | ุฒูุงู **ุงูุชุธุงุฑ ุจุฑุง I/O** (ููุช CPU ุจฺฉุงุฑ ุงุณุช ูู ููุชุธุฑ ุฏุณฺฉ/ุดุจฺฉู ุงุณุช)    | ุฎูุงูุฏู/ููุดุชู ุฑู ุฏุณฺฉโูุง ฺฉูุฏ              |
| **`steal`**   | ุฒูุงู **ุฏุฒุฏุฏู ุดุฏู ุชูุณุท ูุงูพุฑูุงุฒุฑ** ุฏุฑ ูุงุดูโูุง ูุฌุงุฒ                   | ููุช VM ููุงุจุน CPU ุฑุง ุงุฒ ุฏุณุช ูโุฏูุฏ         |
| **`idle`**    | ุฒูุงู **ุจฺฉุงุฑ CPU** (ูฺ ฺฉุงุฑ ุงูุฌุงู ููโุฏูุฏ)                             | CPU ุฏุฑ ุญุงู ุงูุชุธุงุฑ ุจุฑุง ฺฉุงุฑ                 |

---

### ๐ **ุชูุถุญ ุฌุฒุฆุงุช ุจุฑุฎ ููุฏูุง ููู**

#### ฑ. **`nice` (ูุณ)**
- **ูุณ (Nice Value)** ฺฉ ููุฏุงุฑ ุจู `-20` (ุจุงูุงุชุฑู ุงูููุช) ุชุง `19` (ูพุงูโุชุฑู ุงูููุช) ุงุณุช.
- ูพุฑุฏุงุฒุดโูุง ุจุง `nice` ูุซุจุช (ูุซู `+10`) **ฺฉูโุงูููุชโุชุฑ** ูุณุชูุฏ ู CPU ุฒูุงู ฺฉูุชุฑ ุจู ุขูโูุง ุงุฎุชุตุงุต ูโุฏูุฏ.
- ุฏุฑ ฺฏุฒุงุฑุด `top`ุ ุณุชูู `NI` ูุดุงูโุฏููุฏูโ ููุฏุงุฑ ูุณ ุงุณุช.

#### ฒ. **`irq` ู `softirq`**
- โ**IRQ (Interrupt Request)**: ููููโูุง ุณุฎุชโุงูุฒุงุฑ ูุซู ูุดุงุฑ ุฏุงุฏู ฺฉูุฏ ุง ุฏุฑุงูุช ุจุณุชู ุดุจฺฉู.
- โ**SoftIRQ**: ููููโูุง ูุฑูโุงูุฒุงุฑ ฺฉู ูุนูููุงู ุจุฑุง ูพุฑุฏุงุฒุดโูุง ุณุฑุน ุดุจฺฉู/ุฏุณฺฉ ุงุณุชูุงุฏู ูโุดููุฏ.
- ูุซูุงู `NET_RX` ูุฑุจูุท ุจู ุฏุฑุงูุช ุจุณุชูโูุง ุดุจฺฉู ุงุณุช.

#### ณ. **`iowait`**
- ุงฺฏุฑ `iowait` ุจุงูุง ุจุงุดุฏุ ูุดุงูโุฏููุฏู **ูุดฺฉู ุฏุฑ ุฏุณฺฉ ุง I/O** ุงุณุช (ูุซูุงู ุฏุณฺฉ ฺฉูุฏ ุงุณุช ุง ุจุงุฑ ุฒุงุฏ ุฏุงุฑุฏ).
- **ุชูุงูุช ุจุง `idle`**: ุฏุฑ `idle` CPU ูุงูุนุงู ุจฺฉุงุฑ ุงุณุชุ ูู ุฏุฑ `iowait` CPU ููุชุธุฑ I/O ุงุณุช.

#### ด. **`steal`**
- ุฏุฑ ูุญุทโูุง ูุฌุงุฒ (ูุซู KVMุ VMware) ูุดุงู ูโุฏูุฏ **ูุงูพุฑูุงุฒุฑ ฺูุฏุฑ CPU ุฑุง ุงุฒ ูุงุดู ูุฌุงุฒ ฺฏุฑูุชู ุงุณุช**.
- ุงฺฏุฑ `steal` ุจุงูุง ุจุงุดุฏุ ุนู VM ููุงุจุน ฺฉุงู ูุฏุงุฑุฏ.

---

### ๐ **ฺฺฏููู ุงู ููุฏูุง ุฑุง ุจุฑุฑุณ ฺฉููุ**
#### ุฑูุด ฑ: ุจุง `mpstat` (ุงุฒ ุจุณุชู `sysstat`)
```bash
mpstat -P ALL 1  # ููุงุด ุขูุงุฑ ูุญุธูโุง ููู CPUูุง ูุฑ ฑ ุซุงูู
```
ุฎุฑูุฌ:
```
CPU  %user  %nice  %system  %irq  %softirq  %iowait  %steal  %idle
all  10.2   0.5    2.1      0.1   0.3       5.0      0.0     81.8
```

#### ุฑูุด ฒ: ุจุง `top`
- ุฏุฑ `top`ุ ฺฉูุฏ **`t`** ุฑุง ุจุฒูุฏ ุชุง ููุงุด ููุฏูุง CPU ุชุบุฑ ฺฉูุฏ.
- ุฎุท `Cpu(s)` ุฑุง ุจุจูุฏ:
  ```
  %Cpu(s):  5.0 us,  1.0 sy,  0.0 ni, 93.0 id,  1.0 wa,  0.0 hi,  0.0 si,  0.0 st
  ```
  - `us` = user, `sy` = system, `ni` = nice, `wa` = iowait, `st` = steal.

#### ุฑูุด ณ: ุจุง `htop`
- ุฏุฑ `htop`ุ ููุฏูุง CPU ุฏุฑ ุจุงูุง ุตูุญู ุจู ุตูุฑุช ฺฏุฑุงูฺฉ ููุงุด ุฏุงุฏู ูโุดููุฏ.

---

### ๐ **ูุชุฌูโฺฏุฑ**
- โ**`user` + `nice`**: ุฒูุงู ูพุฑุฏุงุฒุด ุจุฑูุงููโูุง ฺฉุงุฑุจุฑุงู.
- โ**`system`**: ุฒูุงู ูพุฑุฏุงุฒุด ูุณุชู.
- โ**`irq` + `softirq`**: ูพุฑุฏุงุฒุด ููููโูุง.
- โ**`iowait`**: ูุดุงูโุฏููุฏู ฺฏููฺฏุงู I/O.
- โ**`steal`**: ูุดฺฉู ุฏุฑ ูุญุทโูุง ูุฌุงุฒ.
- โ**`idle`**: CPU ุจฺฉุงุฑ ุงุณุช.

ุงฺฏุฑ ูุซูุงู `%system` ุดูุง ุจุงูุงุณุชุ ุงุญุชูุงูุงู ุฏุฑุงูุฑ ุง ุณุณุชูโฺฉุงู ูุดฺฉู ุฏุงุฑุฏ. ุงฺฏุฑ `%iowait` ุจุงูุง ุจุงุดุฏุ ุจุงุฏ ุฏุณฺฉ ุฑุง ุจุฑุฑุณ ฺฉูุฏ.

ุจุฑุง ูุฑ CPUุ ูุฌููุน ุญุงูุชโูุง ุฏุฑ ูุฑ ุซุงูู ฺฉ ุซุงูู ุงูุฒุงุด ูโุงุจุฏ. ุงู ุจู ุดูุง ุงูฺฉุงู ูโุฏูุฏ ูุณุจุช ุฒูุงู ุจฺฉุงุฑ (idle) ุฑุง ุฏุฑ ุชูุงู CPUูุง ุจุง ุงุณุชูุงุฏู ุงุฒ ุนุจุงุฑุช PromQL ูุญุงุณุจู ฺฉูุฏ:

`avg without(cpu, mode)(rate(node_cpu_seconds_total{mode="idle"}[1m]))`

ุงู ฺฉุงุฑ ูโฺฉูุฏ ุฒุฑุง ุฒูุงู ุจฺฉุงุฑ ุฏุฑ ูุฑ ุซุงูู ุจุฑุง ูุฑ CPU ุฑุง ูุญุงุณุจู ูโฺฉูุฏ ู ุณูพุณ ุขู ุฑุง ุฏุฑ ุชูุงู CPUูุง ูุงุดู ูุงูฺฏู ูโฺฏุฑุฏ. ูโุชูุงูุฏ ุงู ุฑุง ุจุฑุง ูุญุงุณุจู ูุณุจุช ุฒูุงู ุตุฑู ุดุฏู ุฏุฑ ูุฑ ุญุงูุช ุจุฑุง ฺฉ ูุงุดู ุจุง ุงุณุชูุงุฏู ุงุฒ ุนุจุงุฑุช ุฒุฑ ุชุนูู ุฏูุฏ:
`avg without(cpu)(rate(node_cpu_seconds_total[1m]))`

ุงุณุชูุงุฏู ุงุฒ CPU ุชูุณุท ูููุงูโูุง (ุนู ูุงุดูโูุง ูุฌุงุฒ ฺฉู ุชุญุช ูุณุชู ุงุฌุฑุง ูโุดููุฏ) ูุจูุงู ุฏุฑ ุญุงูุชโูุง user ู nice ฺฏูุฌุงูุฏู ุดุฏู ุงุณุช. ูโุชูุงูุฏ ุฒูุงู ูููุงู ุฑุง ุจู ุทูุฑ ุฌุฏุงฺฏุงูู ุฏุฑ ูุชุฑฺฉ `node_cpu_guest_seconds_total` ูุดุงูุฏู ฺฉูุฏ.

### ฺฉุงูฺฉุชูุฑ Filesystem (ูุงู ุณุณุชู)

ฺฉุงูฺฉุชูุฑ ูุงู ุณุณุชูุ ููุงูุทูุฑ ฺฉู ุงูุชุธุงุฑ ูโุฑูุฏุ ูุชุฑฺฉโูุง ุฏุฑุจุงุฑู ูุงู ุณุณุชูโูุง ูุงูุช ุดุฏู ุดูุง ุฌูุนโุขูุฑ ูโฺฉูุฏุ ุฏุฑุณุช ููุงูุทูุฑ ฺฉู ุงุฒ ุฏุณุชูุฑ `df` ุจู ุฏุณุช ูโุขูุฑุฏ. ููฺฏโูุง `--collector.filesystem.mount-points-exclude` ู `--collector.filesystem.fs-types-exclude` ุงุฌุงุฒู ูุญุฏูุฏ ฺฉุฑุฏู ูุงู ุณุณุชูโูุง ฺฏูุฌุงูุฏู ุดุฏู ุฑุง ูโุฏููุฏ (ูพุดโูุฑุถโูุง ุดุงูู ุดุจูโูุงูโุณุณุชูโูุง (pseudofilesystems) ูุฎุชูู ููโุดููุฏ). ุงุฒ ุขูุฌุง ฺฉู ุงฺฉุณูพูุฑุชุฑ ููุฏ ุฑุง ุจู ุนููุงู ุฑูุช ุงุฌุฑุง ูุฎูุงูุฏ ฺฉุฑุฏุ ุจุงุฏ ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู ูุฌูุฒูุง ูุงู ุจู ุขู ุงุฌุงุฒู ูโุฏูุฏ ุงุฒ ูุฑุงุฎูุงู ุณุณุชู `statfs` ุฑู ููุงุท ูุงูุช (mountpoints) ููุฑุฏ ูุธุฑ ุดูุง ุงุณุชูุงุฏู ฺฉูุฏ.

ุชูุงู ูุชุฑฺฉโูุง ุงู ฺฉุงูฺฉุชูุฑ ุจุง ูพุดููุฏ `node_filesystem_` ุดุฑูุน ูโุดููุฏ ู ุฏุงุฑุง ูุจูโูุง `device`ุ `fstype` ู `mountpoint` ูุณุชูุฏ:

```sh
# HELP node_filesystem_size_bytes Filesystem size in bytes.
# TYPE node_filesystem_size_bytes gauge
node_filesystem_size_bytes{device="/dev/sda5",fstype="ext4",mountpoint="/"} 9e+10
```

ุฏุฑ **Prometheus**ุ ูุจูโูุง `device`ุ `fstype` ู `mountpoint` ุจุฑุง ูุงูุชูุฑูฺฏ **ุฏุณฺฉโูุง ู ูุงูโุณุณุชูโูุง** ุงุณุชูุงุฏู ูโุดููุฏ ู ุฌุฒุฆุงุช ููู ุฑุง ุฏุฑุจุงุฑูโ ุฐุฎุฑูโุณุงุฒ ุณุณุชู ุงุฑุงุฆู ูโุฏููุฏ. ุฏุฑ ุงูุฌุง ุชูุถุญ ูุฑ ูุจู ุจู ููุฑุงู ูุซุงู ุขูุฑุฏู ุดุฏู ุงุณุช:

---

### ๐ **ูุจูโูุง ุงุตู ุฏุณฺฉ ุฏุฑ Prometheus**
| ูุจู             | ุชูุถุญุงุช                                         | ูุซุงู ููุฏุงุฑ               | ฺฉุงุฑุจุฑุฏ ููููู                               |
| ---------------- | ----------------------------------------------- | ------------------------ | ------------------------------------------ |
| **`device`**     | ูุงู ุฏุณุชฺฏุงู ุฏุณฺฉ (ูุณุฑ ุฏุณุชฺฏุงู ุฏุฑ ุณุณุชู)          | `sda1`ุ `nvme0n1p2`      | ุดูุงุณุง ุฏุณฺฉ ุฎุงุต                           |
| **`fstype`**     | ููุน ูุงูโุณุณุชู (ูุฑูุช ุฐุฎุฑูโุณุงุฒ ุฏุงุฏูโูุง)        | `ext4`ุ `xfs`ุ `btrfs`   | ุชุดุฎุต ูุงูโุณุณุชูโูุง ูพุฑฺฉุงุฑุจุฑุฏ              |
| **`mountpoint`** | ูุณุฑ ูุตุจ (ูฺฉุงู ฺฉู ุฏุณฺฉ ุฏุฑ ุณุณุชู mount ุดุฏู ุงุณุช) | `/`ุ `/var/lib`ุ `/home` | ูุงูุชูุฑูฺฏ ูุถุง ุงุดุบุงูโุดุฏู ุฏุฑ ูุณุฑูุง ุญุงุช |

---

### ๐ **ุฌุฒุฆุงุช ุจุดุชุฑ ุฏุฑุจุงุฑู ูุฑ ูุจู**
#### ฑ. **`device`**
- **ููุงุฏุฑ ุฑุงุฌ**:  
  - ุฏุณฺฉโูุง SATA/SCSI: `sda`ุ `sdb`ุ `sda1`  
  - ุฏุณฺฉโูุง NVMe: `nvme0n1`ุ `nvme0n1p1`  
- **ูุซุงู ุฏุฑ ูุชุฑฺฉ**:  
  ```promql
  node_filesystem_size_bytes{device="/dev/nvme0n1p1"}
  ```

#### ฒ. **`fstype`**
- **ุงููุงุน ุฑุงุฌ**:  
  - `ext4` (ูพุดโูุฑุถ ุฏุฑ ุจุณุงุฑ ุงุฒ ุชูุฒุนโูุง ูููฺฉุณ)  
  - `xfs` (ุจุฑุง ุณุณุชูโูุง ุจุง ูุงูโูุง ุจุฒุฑฺฏ)  
  - `btrfs`ุ `zfs` (ุจุฑุง snapshot ู ูุฏุฑุช ูพุดุฑูุชู)  
  - `tmpfs` (ูุงูโุณุณุชู ูููุช ุฏุฑ RAM)  
- **ูุซุงู ุฏุฑ ฺฉูุฆุฑ**:  
  ```promql
  node_filesystem_avail_bytes{fstype="ext4"}
  ```

#### ณ. **`mountpoint`**
- **ูุณุฑูุง ุญุงุช**:  
  - `/` (ุฑุช ูุงูโุณุณุชู)  
  - `/boot` (ูพุงุฑุชุดู ุจูุช)  
  - `/var` (ุจุฑุง ูุงฺฏโูุง ู ุฏุงุฏูโูุง ูุชุบุฑ)  
- **ูุซุงู ุฏุฑ ูุดุฏุงุฑ**:  
  ```promql
  node_filesystem_avail_bytes{mountpoint="/"} < 1GB  # ูุดุฏุงุฑ ุจุฑุง ูพุฑ ุดุฏู ุฑูุช
  ```

---

### ๐ **ฺฉุงุฑุจุฑุฏูุง ุนูู**
ฑ. **ูพุฏุง ฺฉุฑุฏู ุฏุณฺฉโูุง ูพุฑฺฉุงุฑุจุฑุฏ**:  
   ```promql
   rate(node_disk_read_bytes_total{device=~"sd.*|nvme.*"}[5m])
   ```

ฒ. **ูุงูุชูุฑูฺฏ ูุถุง ุขุฒุงุฏ ุจุฑ ุงุณุงุณ mountpoint**:  
   ```promql
   node_filesystem_avail_bytes{mountpoint="/home"} / node_filesystem_size_bytes{mountpoint="/home"} * 100
   ```

ณ. **ููุชุฑ ฺฉุฑุฏู ูุงูโุณุณุชูโูุง ูููุช**:  
   ```promql
   node_filesystem_size_bytes{fstype!="tmpfs"}
   ```

---

### ๐ **ููููู ุฎุฑูุฌ ูุชุฑฺฉ ุจุง ูุจูโูุง**
```promql
node_filesystem_size_bytes{device="/dev/nvme0n1p1", fstype="ext4", mountpoint="/"} 256GB

node_filesystem_avail_bytes{device="/dev/sda1", fstype="xfs", mountpoint="/var"} 50GB
```

---

### โ **ฺุฑุง ุงู ูุจูโูุง ููู ูุณุชูุฏุ**
- **ุนุจโุงุจ**: ุงฺฏุฑ `/var` ูพุฑ ุดูุฏุ ูโุชูุงูุฏ ุจุงุนุซ crash ุจุฑูุงููโูุง ุดูุฏ.  
- **ุจูููโุณุงุฒ**: ุชุดุฎุต ุฏุณฺฉโูุง ฺฉูุฏ (`device`) ุง ูุงูโุณุณุชูโูุง ูุงฺฉุงุฑุขูุฏ (`fstype`).  
- **ูุดุฏุงุฑุฏู**: ุงุนูุงู ููฺฏุงู ูพุฑ ุดุฏู mountpointโูุง ุญุงุช.  

---


ูุชุฑฺฉโูุง ูุงู ุณุณุชู ุนูุฏุชุงู ุจุฏู ูุณุชูุฏ. ูฺฉุชู ุธุฑู ฺฉู ุจุงุฏ ุงุฒ ุขู ุขฺฏุงู ุจุงุดุฏ ุชูุงูุช ุจู `node_filesystem_avail_bytes` ู `node_filesystem_free_bytes` ุงุณุช. ุฏุฑ ูุงู ุณุณุชูโูุง ููฺฉุณ ููุฏุงุฑ ูุถุง ุจุฑุง ฺฉุงุฑุจุฑ ุฑูุช ุฑุฒุฑู ุดุฏู ุงุณุชุ ุชุง ุฒูุงู ฺฉู ฺฉุงุฑุจุฑุงู ุชูุงู ูุถุง ููุฌูุฏ ุฑุง ูพุฑ ูโฺฉููุฏุ ููฺูุงู ุจุชูุงููุฏ ฺฉุงุฑูุง ุงูุฌุงู ุฏููุฏ. `node_filesystem_avail_bytes` ูุถุง ุฏุฑ ุฏุณุชุฑุณ ฺฉุงุฑุจุฑุงู ุงุณุช ู ููฺฏุงู ุชูุงุด ุจุฑุง ูุญุงุณุจู ูุถุง ุฏุณฺฉ ุงุณุชูุงุฏู ุดุฏูุ ุจุงุฏ ุจุฑ ุงู ุงุณุงุณ ุงุฒ ูุฑููู ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

```sh
node_filesystem_avail_bytes
/
node_filesystem_size_bytes
```

โ`node_filesystem_files` ู `node_filesystem_files_free` ุชุนุฏุงุฏ ุขโููุฏูุง (inodes) ู ุชุนุฏุงุฏ ุขโููุฏูุง ุขุฒุงุฏ ุฑุง ูุดุงู ูโุฏููุฏุ ฺฉู ุชูุฑุจุงู ุชุนุฏุงุฏ ูุงูโูุง ุงุณุช ฺฉู ูุงู ุณุณุชู ุดูุง ุฏุงุฑุฏ. ูโุชูุงูุฏ ุงู ุฑุง ุจุง `df -i` ูุฒ ูุดุงูุฏู ฺฉูุฏ.


ุฏุฑ **Prometheus**ุ ูุฑ ุฏู ูุชุฑฺฉ `node_filesystem_avail_bytes` ู `node_filesystem_free_bytes` ูุฑุจูุท ุจู **ูุถุง ุฐุฎุฑูโุณุงุฒ ุฏุณฺฉ** ูุณุชูุฏุ ุงูุง ุชูุงูุช ููู ุฏุฑ ูุนู ู ฺฉุงุฑุจุฑุฏ ุฏุงุฑูุฏ. ุฏุฑ ุงูุฌุง ููุงุณู ุฏูู ุงู ุฏู ูุชุฑฺฉ ุฑุง ุจุฑุฑุณ ูโฺฉูู:

---

### ๐ **ููุงุณู `node_filesystem_avail_bytes` ู `node_filesystem_free_bytes**

| **ูุชุฑฺฉ**                      | **ุชูุถุญ**                                                                 | **ูุซุงู ฺฉุงุฑุจุฑุฏ**                                                                 |
|---------------------------------|---------------------------------------------------------------------------|---------------------------------------------------------------------------------|
| **`node_filesystem_free_bytes`**   | **ฺฉู ูุถุง ุฎุงู ูุฒฺฉ** ุฑู ุฏุณฺฉ (ุจุฏูู ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุฑุฒุฑู ุณุณุชู).<br>โข ุดุงูู ูุถุง ุงุณุช ฺฉู ุญุช ููฺฉู ุงุณุช ุชูุณุท ุณุณุชู ุฑุฒุฑู ุดุฏู ุจุงุดุฏ. | ุงฺฏุฑ ุฏุณฺฉ ฑฐฐGB ุจุงุดุฏ ู ฒฐGB ุขุฒุงุฏ ุฏุงุดุชู ุจุงุดุฏุ ุงู ููุฏุงุฑ **ฒฐGB** ุฑุง ูุดุงู ูโุฏูุฏ (ุญุช ุงฺฏุฑ ตGB ุจุฑุง root ุฑุฒุฑู ุดุฏู ุจุงุดุฏ). |
| **`node_filesystem_avail_bytes`**  | **ูุถุง ูุงุจู ุงุณุชูุงุฏู ุชูุณุท ฺฉุงุฑุจุฑุงู ุนุงุฏ** (ูพุณ ุงุฒ ฺฉุณุฑ ูุถุง ุฑุฒุฑู ุณุณุชู).<br>โข ุงู ููุฏุงุฑ ูุนูููุงู **โค free_bytes** ุงุณุช. | ุฏุฑ ููุงู ูุซุงู ุจุงูุงุ ุงฺฏุฑ ตGB ุจุฑุง root ุฑุฒุฑู ุดุฏู ุจุงุดุฏุ ุงู ูุชุฑฺฉ **ฑตGB** ุฑุง ูุดุงู ูโุฏูุฏ (ฒฐGB ุขุฒุงุฏ - ตGB ุฑุฒุฑู). |

---

### ๐ **ุชูุงูุช ฺฉูุฏ**
-โ โ**`free_bytes`** โ ูุถุง ุฎุงู ุขุฒุงุฏ (ุจุฏูู ุชูุฌู ุจู ูุญุฏูุฏุชโูุง ุณุณุชู).  
-โ โ**`avail_bytes`** โ ูุถุง ูุงูุนุงู ูุงุจู ุฏุณุชุฑุณ ุจุฑุง ุจุฑูุงููโูุง ฺฉุงุฑุจุฑุงู ุนุงุฏ (ูพุณ ุงุฒ ฺฉุณุฑ ุณูู root ู ุณุงุฑ ุฑุฒุฑููุง).  

---

### ๐ **ูุซุงู ุนูู ุฏุฑ PromQL**
ฑ. **ูุดุฏุงุฑ ุจุฑุง ูุถุง ูุงุจู ุงุณุชูุงุฏู (avail)**:  
   ```promql
   node_filesystem_avail_bytes{mountpoint="/"} / node_filesystem_size_bytes{mountpoint="/"} * 100 < 10
   ```
   - **ูุดุฏุงุฑ** ุฒูุงู ูุนุงู ูโุดูุฏ ฺฉู ฺฉูุชุฑ ุงุฒ **ฑฐูช** ูุถุง ุฏุณฺฉ ุจุฑุง ฺฉุงุฑุจุฑุงู ุนุงุฏ ูุงุจู ุงุณุชูุงุฏู ุจุงุดุฏ.

ฒ. **ุจุฑุฑุณ ูุถุง ุขุฒุงุฏ ุฎุงู (free)**:  
   ```promql
   node_filesystem_free_bytes{fstype="ext4"}
   ```
   - ุจุฑุง ุชุญูู **ูุถุง ูุฒฺฉ ุจุงูโูุงูุฏู** ุจุฏูู ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุฑุฒุฑู ุณุณุชู.

---

### ๐ผ๏ธ **ุชุตูุฑุณุงุฒ ุชูุงูุช**
```
ุฏุณฺฉ ฑฐฐGB:
โ
โโโ ูุถุง ุงุณุชูุงุฏูโุดุฏู: ทฐGB
โโโ Free (free_bytes): ณฐGB
โ   โโโ ุฑุฒุฑู ุณุณุชู: ตGB (ููุท ุจุฑุง root ูุงุจู ุงุณุชูุงุฏู)
โ   โโโ Available (avail_bytes): ฒตGB (ุจุฑุง ฺฉุงุฑุจุฑุงู ุนุงุฏ)
```

---

### โ **ฺฉุฏุงู ูุชุฑฺฉ ูููโุชุฑ ุงุณุชุ**
- ุจุฑุง **ูุงูุชูุฑูฺฏ ุนููู** โ ุงุฒ `avail_bytes` ุงุณุชูุงุฏู ฺฉูุฏ (ุฒุฑุง ูุถุนุช ูุงูุน ฺฉุงุฑุจุฑุงู ุฑุง ูุดุงู ูโุฏูุฏ).  
- ุจุฑุง **ุจุฑุฑุณ ูุถุง ุฎุงู** โ `free_bytes` ููุฏ ุงุณุช (ูุซูุงู ููุช ูโุฎูุงูุฏ ุจุฏุงูุฏ ฺูุฏุฑ ูุถุง ุฎุงู ุจุฏูู ุชุบุฑ ุชูุธูุงุช ุณุณุชู ุฏุงุฑุฏ).  

---

### โ๏ธ **ูฺฉุชู ูู**
- ุฏุฑ ุจุฑุฎ ูุงูโุณุณุชูโูุง (ูุซู `ext4`)ุ **ตูช ุงุฒ ูุถุง ุฏุณฺฉ ุจู ุทูุฑ ูพุดโูุฑุถ ุจุฑุง root ุฑุฒุฑู ูโุดูุฏ** (ุจุฑุง ุฌููฺฏุฑ ุงุฒ ูพุฑ ุดุฏู ฺฉุงูู ุฏุณฺฉ ุชูุณุท ฺฉุงุฑุจุฑุงู ุนุงุฏ).  
- ุงู ุฑุฒุฑู ุจุง ุฏุณุชูุฑ `tune2fs` ูุงุจู ุชุบุฑ ุงุณุช:  
  ```bash
  tune2fs -m 1 /dev/sda1  # ุชุบุฑ ุฑุฒุฑู ุจู ฑูช
  ```




### ฺฉุงูฺฉุชูุฑ Diskstats (ุขูุงุฑ ุฏุณฺฉ)

ฺฉุงูฺฉุชูุฑ diskstats ูุชุฑฺฉโูุง ูุฑูุฏ/ุฎุฑูุฌ ุฏุณฺฉ ุฑุง ุงุฒ `/proc/diskstats` ุฏุฑ ูุนุฑุถ ููุงุด ูุฑุงุฑ ูโุฏูุฏ. ุจู ุทูุฑ ูพุดโูุฑุถุ ููฺฏ `--collector.diskstats.device-exclude` ุณุน ูโฺฉูุฏ ฺุฒูุง ุฑุง ฺฉู ุฏุณฺฉ ูุงูุน ูุณุชูุฏุ ูุงููุฏ ูพุงุฑุชุดูโูุง ู ุฏุณุชฺฏุงูโูุง ูููพโุจฺฉ (loopback)ุ ูุณุชุซู ฺฉูุฏ:

```
# HELP node_disk_io_now The number of I/Os currently in progress.
# TYPE node_disk_io_now gauge
node_disk_io_now{device="sda"} 0
```

ุชูุงู ูุชุฑฺฉโูุง ุฏุงุฑุง ูุจู `device` ูุณุชูุฏ ู ุชูุฑุจุงู ููู ุดูุงุฑูุฏู (counter) ูโุจุงุดูุฏุ ุจู ุดุฑุญ ุฒุฑ:

ุฏุฑ ุงูุฌุง ุฌุฏูู ูุชุฑฺฉโูุง ุฏุณฺฉ ุฏุฑ Prometheus ุฑุง ูุดุงูุฏู ูโฺฉูุฏ:

| ูุชุฑฺฉ                                | ุชูุถุญุงุช                                       |
| ------------------------------------ | --------------------------------------------- |
| `node_disk_io_now`                   | ุชุนุฏุงุฏ ุนููุงุช I/O ุฏุฑ ุญุงู ุงูุฌุงู ุฑู ุฏุณฺฉ        |
| `node_disk_io_time_seconds_total`    | ุฒูุงู ฺฉู ุตุฑู ุดุฏู ุจุฑุง ุนููุงุช I/O (ุจู ุซุงูู)    |
| `node_disk_read_bytes_total`         | ุชุนุฏุงุฏ ฺฉู ุจุงุชโูุง ุฎูุงูุฏู ุดุฏู ุงุฒ ุฏุณฺฉ          |
| `node_disk_read_time_seconds_total`  | ุฒูุงู ฺฉู ุตุฑู ุดุฏู ุจุฑุง ุนููุงุช ุฎูุงูุฏู (ุจู ุซุงูู) |
| `node_disk_reads_completed_total`    | ุชุนุฏุงุฏ ฺฉู ุนููุงุช ุฎูุงูุฏู ุชฺฉูู ุดุฏู              |
| `node_disk_written_bytes_total`      | ุชุนุฏุงุฏ ฺฉู ุจุงุชโูุง ููุดุชู ุดุฏู ุฑู ุฏุณฺฉ          |
| `node_disk_write_time_seconds_total` | ุฒูุงู ฺฉู ุตุฑู ุดุฏู ุจุฑุง ุนููุงุช ููุดุชู (ุจู ุซุงูู)  |
| `node_disk_writes_completed_total`   | ุชุนุฏุงุฏ ฺฉู ุนููุงุช ููุดุชู ุชฺฉูู ุดุฏู               |

ุงู ุฌุฏูู ุจู ุดูุง ฺฉูฺฉ ูโฺฉูุฏ ุชุง:
ฑ. ูุฒุงู ูุนุงูุช ุฏุณฺฉโูุง ุฎูุฏ ุฑุง ูุงูุชูุฑ ฺฉูุฏ
ฒ. ูุดฺฉูุงุช ูุฑุจูุท ุจู I/O ุฑุง ุชุดุฎุต ุฏูุฏ
ณ. ฺฉุงุฑุง ุณุณุชู ุฐุฎุฑูโุณุงุฒ ุฑุง ุชุญูู ููุงุฏ

ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ุงู ูุชุฑฺฉโูุง ูโุชูุงูุฏ ุงุฒ ฺฉูุฆุฑโูุง PromQL ุงุณุชูุงุฏู ฺฉูุฏุ ูุซูุงู:
```promql
rate(node_disk_read_bytes_total[5m])  # ูุฑุฎ ุฎูุงูุฏู ุงุฒ ุฏุณฺฉ
```

### ฺฉุงูฺฉุชูุฑ Netdev (ุฏุณุชฺฏุงู ุดุจฺฉู)

ฺฉุงูฺฉุชูุฑ netdev ูุชุฑฺฉโูุง ุฏุฑุจุงุฑู ุฏุณุชฺฏุงูโูุง ุดุจฺฉู ุดูุง ุจุง ูพุดููุฏ `node_network_` ู ฺฉ ูุจู `device` ุฏุฑ ูุนุฑุถ ููุงุด ูุฑุงุฑ ูโุฏูุฏ:

```sh
# HELP node_network_receive_bytes_total Network device statistic receive_bytes.
# TYPE node_network_receive_bytes_total counter
node_network_receive_bytes_total{device="lo"} 8.3213967e+07
node_network_receive_bytes_total{device="wlan0"} 7.0854462e+07
```

โ`node_network_receive_bytes_total` ู `node_network_transmit_bytes_total` ูุชุฑฺฉโูุง ุงุตู ูุณุชูุฏ ฺฉู ุจู ุขูโูุง ุงููุช ุฎูุงูุฏ ุฏุงุฏ ุฒุฑุง ูโุชูุงูุฏ ูพููุง ุจุงูุฏ ูุฑูุฏ ู ุฎุฑูุฌ ุดุจฺฉู ุฑุง ุจุง ุขูโูุง ูุญุงุณุจู ฺฉูุฏ:

`rate(node_network_receive_bytes_total[1m])`

ููฺฉู ุงุณุช ุจู `node_network_receive_packets_total` ู `node_network_transmit_packets_total` ูุฒ ุนูุงููโููุฏ ุจุงุดุฏ ฺฉู ุจู ุชุฑุชุจ ุจุณุชูโูุง ูุฑูุฏ ู ุฎุฑูุฌ ุฑุง ุฑุฏุงุจ ูโฺฉููุฏ.

## ฺฉุงูฺฉุชูุฑ Meminfo (ุงุทูุงุนุงุช ุญุงูุธู)

ฺฉุงูฺฉุชูุฑ meminfo ุชูุงู ูุชุฑฺฉโูุง ุงุณุชุงูุฏุงุฑุฏ ูุฑุจูุท ุจู ุญุงูุธู ุดูุง ุฑุง ุจุง ูพุดููุฏ `node_memory_` ุฏุงุฑุฏ. ููู ุงูโูุง ุงุฒ `/proc/meminfo` ุดูุง ูโุขูุฏุ ู ุงู ุงููู ฺฉุงูฺฉุชูุฑ ุงุณุช ฺฉู ูุนูุงุดูุงุณ (semantics) ฺฉู ูุจูู ูโุดูุฏ. ฺฉุงูฺฉุชูุฑ ฺฉููุจุงุชโูุง ุฑุง ุจู ุจุงุชโูุง ุชุฑุฌุญ ุชุจุฏู ูโฺฉูุฏุ ุงูุง ูุฑุงุชุฑ ุงุฒ ุขูุ ุจู ุดูุง ุจุณุชฺฏ ุฏุงุฑุฏ ฺฉู ุจู ุงูุฏุงุฒู ฺฉุงู ุงุฒ ูุณุชูุฏุงุช ู ุชุฌุฑุจู ุจุง ููุงุฑุฏ ุฏุงุฎู ูููฺฉุณ ุจุฏุงูุฏ ุชุง ุจูููุฏ ุงู ูุชุฑฺฉโูุง ฺู ูุนูุง ุฏุงุฑูุฏ:

```sh
# HELP node_memory_MemTotal_bytes Memory information field MemTotal.
# TYPE node_memory_MemTotal_bytes gauge
node_memory_MemTotal_bytes 3.285016576e+10
```

ุจู ุนููุงู ูุซุงูุ `node_memory_MemTotal_bytes` ููุฏุงุฑ ฺฉู ุญุงูุธู ูุฒฺฉ ุฏุฑ ูุงุดู ุงุณุช โ ุฎูุจ ู ูุงุถุญ. ุงูุง ุชูุฌู ุฏุงุดุชู ุจุงุดุฏ ฺฉู ูฺ ูุชุฑฺฉ ุญุงูุธู ุงุณุชูุงุฏู ุดุฏู (used memory) ูุฌูุฏ ูุฏุงุฑุฏุ ุจูุงุจุฑุงู ุจุงุฏ ุจู ููุน ุขู ุฑุง ูุญุงุณุจู ฺฉูุฏ ู ุฏุฑ ูุชุฌู ุจูููุฏ ฺูุฏุฑ ุญุงูุธู ุงุฒ ูุชุฑฺฉโูุง ุฏฺฏุฑ ุงุณุชูุงุฏู ูุดุฏู ุงุณุช.

โ`node_memory_MemFree_bytes` ููุฏุงุฑ ุญุงูุธูโุง ุงุณุช ฺฉู ุชูุณุท ูฺ ฺุฒ ุงุณุชูุงุฏู ููโุดูุฏุ ุงูุง ุงู ุจุฏุงู ูุนูุง ูุณุช ฺฉู ุชูุงู ุญุงูุธูโุง ุงุณุช ฺฉู ุฏุฑ ุงุฎุชุงุฑ ุฏุงุฑุฏ. ุฏุฑ ุชุฆูุฑุ ฺฉุด ุตูุญู (page cache) ุดูุง (`node_memory_Cached_bytes`) ู ููฺูู ุจุงูุฑูุง ููุดุชู (write buffers) ุดูุง (`node_memory_Buffers_bytes`) ูุงุจู ุจุงุฒูพุณโฺฏุฑ ูุณุชูุฏุ ุงูุง ุงู ูโุชูุงูุฏ ุจุฑ ุนููฺฉุฑุฏ ุจุฑุฎ ุจุฑูุงููโูุง ุชุฃุซุฑ ููู ุจฺฏุฐุงุฑุฏ. ุนูุงูู ุจุฑ ุงูุ ุณุงุฎุชุงุฑูุง ูุฎุชูู ูุณุชู ุฏฺฏุฑ ูุฌูุฏ ุฏุงุฑูุฏ ฺฉู ุงุฒ ุญุงูุธู ุงุณุชูุงุฏู ูโฺฉููุฏ ูุงููุฏ slab ู ุฌุฏุงูู ุตูุญู (page tables).

โ`node_memory_MemAvailable` ฺฉ ุฑูุด ุงฺฉุชุดุงู (heuristic) ุงุฒ ูุณุชู ุจุฑุง ูุฒุงู ุญุงูุธู ูุงูุนุงู ุฏุฑ ุฏุณุชุฑุณ ุงุณุชุ ุงูุง ุชููุง ุฏุฑ ูุณุฎู 3.14 ูููฺฉุณ ุงุถุงูู ุดุฏ. ุงฺฏุฑ ุงุฒ ูุณุชู ุจู ุงูุฏุงุฒู ฺฉุงู ุฌุฏุฏ ุงุณุชูุงุฏู ูโฺฉูุฏุ ุงู ูุชุฑฺฉ ุงุณุช ฺฉู ูโุชูุงูุฏ ุจุฑุง ุชุดุฎุต ุงุชูุงู ุญุงูุธู ุงุฒ ุขู ุงุณุชูุงุฏู ฺฉูุฏ.

ุฏุฑ ูููฺฉุณุ **Slab** ู **Page Tables** ุฏู ูฺฉุงูุณู ููู ุจุฑุง ูุฏุฑุช ุญุงูุธู (Memory Management) ูุณุชูุฏ ฺฉู ููุดโูุง ูุชูุงูุช ุงูุง ูโฺฉููุฏ.

---

### ฑ. **Slab Allocator (ุชุฎุตุต ุฏููุฏู ุงุณูุจ)**
#### ๐ **ฺุณุชุ**
- โ**Slab** ฺฉ ุณุณุชู ุชุฎุตุต ุญุงูุธู **ฺฉุงุฑุขูุฏ ุจุฑุง ุงุดุงุก ฺฉูฺฺฉ ู ูพุฑุชฺฉุฑุงุฑ** ุฏุฑ ูุณุชู ูููฺฉุณ ุงุณุช.
- ุจุฑุง ุฌููฺฏุฑ ุงุฒ **ุชฺฉูุชฺฉู ุดุฏู ุญุงูุธู (Fragmentation)** ู ฺฉุงูุด **ุณุฑุจุงุฑ ุชุฎุตุต/ุขุฒุงุฏุณุงุฒ ูฺฉุฑุฑ** ุทุฑุงุญ ุดุฏู ุงุณุช.

#### ๐ **ฺฉุงุฑุจุฑุฏ ุงุตู**
- ูุฏุฑุช ุญุงูุธู ุจุฑุง:
  - **ุณุงุฎุชุงุฑูุง ุฏุงุฏู ูพุฑฺฉุงุฑุจุฑุฏ ูุณุชู** (ูุซู `task_struct`ุ `inode`ุ `dentries`).
  - **ุงุดุง ฺฉูฺฺฉ** (ูุซูุงู descriptorูุง ูุงูุ ุดุจฺฉูุ ู ุบุฑู).

#### ๐ **ูฺฉุงูุณู ฺฉุงุฑ**
- โ**Slab** ุญุงูุธู ุฑุง ุจู **ุญูุถฺูโูุง ุงุฒ ูพุด ุงุฎุชุตุงุตโุงูุชู (Cache)** ุชูุณู ูโฺฉูุฏ.
- ูุฑ Cache ุจุฑุง ฺฉ ููุน ุดุก ุฎุงุต (ูุซูุงู `inode_cache`) ุงุณุชูุงุฏู ูโุดูุฏ.
- ุงุดุงุก ุขุฒุงุฏ ุดุฏู ุจูุงูุงุตูู ุญุฐู ููโุดููุฏุ ุจูฺฉู ุจุฑุง ุงุณุชูุงุฏู ุจุนุฏ **ุฏุฑูู Cache ูฺฏูุฏุงุฑ** ูโุดููุฏ.

#### ๐ **ููุงุด ุฏุฑ ูููฺฉุณ**
- ุจุง ุฏุณุชูุฑ `slabtop` ูโุชูุงู ูุถุนุช Slab ุฑุง ูุดุงูุฏู ฺฉุฑุฏ:
  ```bash
  slabtop -o
  ```
  ุฎุฑูุฌ:
  ```
  OBJS   ACTIVE  USE OBJ SIZE  SLABS OBJ/SLAB CACHE SIZE NAME
  1024    800    78%    256B      4     256     1MB     inode_cache
  ```

#### ๐ **ูุฒุงุง**
- ฺฉุงูุด **ุชุฃุฎุฑ ุชุฎุตุต ุญุงูุธู**.
- ุฌููฺฏุฑ ุงุฒ **Fragmentation ุญุงูุธู ูุณุชู**.

---

### ฒ. **Page Tables (ุฌุฏุงูู ุตูุญู)**
#### ๐ **ฺุณุชุ**
- โ**Page Tables** ุณุงุฎุชุงุฑูุง ุฏุงุฏูโุง ูุณุชูุฏ ฺฉู **ูฺฏุงุดุช ุขุฏุฑุณโูุง ูุฌุงุฒ ุจู ูุฒฺฉ** ุฑุง ูุฏุฑุช ูโฺฉููุฏ.
- ูุฑ ูพุฑูุณู ุฏุฑ ูููฺฉุณ ุขุฏุฑุณโูุง ูุฌุงุฒ (Virtual Addresses) ุฎูุฏ ุฑุง ุฏุงุฑุฏ ฺฉู ุจุงุฏ ุจู ุขุฏุฑุณโูุง ูุฒฺฉ (Physical Addresses) ุชุฑุฌูู ุดูุฏ.

#### ๐ **ฺฉุงุฑุจุฑุฏ ุงุตู**
- ูพุงุฏูโุณุงุฒ **ุญุงูุธู ูุฌุงุฒ (Virtual Memory)**.
- ุฌุฏุงุณุงุฒ ุญุงูุธู ุจู ูพุฑูุณูโูุง (**ุงุฒููู ฺฉุฑุฏู ุญุงูุธู**).

#### ๐ **ูฺฉุงูุณู ฺฉุงุฑ**
- **ูุฑ ูพุฑูุณู** ุฌุฏูู ุตูุญู ูุฎุตูุต ุจู ุฎูุฏ ุฏุงุฑุฏ.
- ูุนูุงุฑโูุง ูุฎุชูู ุงุฒ **ุณุทูุญ ูุฎุชูู Page Table** ุงุณุชูุงุฏู ูโฺฉููุฏ (ูุซูุงู ด ุณุทุญ ุฏุฑ x86-64):
  ฑ. **PGD (Page Global Directory)**
  ฒ. **PUD (Page Upper Directory)**
  ณ. **PMD (Page Middle Directory)**
  ด. **PTE (Page Table Entry)**

#### ๐ **ููุงุด ุฏุฑ ูููฺฉุณ**
- ูุฒุงู ุงุณุชูุงุฏู ุงุฒ Page Tables ุฑุง ูโุชูุงู ุจุง `pmap` ุง `/proc/meminfo` ุฏุฏ:
  ```bash
  grep "PageTables" /proc/meminfo
  ```
  ุฎุฑูุฌ:
  ```
  PageTables:   123456 kB
  ```

#### ๐ **ฺุงูุดโูุง**
- **ุณุฑุจุงุฑ ุญุงูุธู**: ูุฑ ูพุฑูุณู ุจู ูุถุง ุจุฑุง Page Tables ูุงุฒ ุฏุงุฑุฏ.
- โ**TLB Miss**: ุงฺฏุฑ ุชุฑุฌูู ุขุฏุฑุณ ุฏุฑ ุญุงูุธู ูพููุงู (TLB) ูุจุงุดุฏุ ุฏุณุชุฑุณ ุจู ุญุงูุธู ฺฉูุฏ ูโุดูุฏ.

---

### ๏ฟฝ **ููุงุณู Slab ู Page Tables**
| ูฺฺฏ            | Slab Allocator              | Page Tables                    |
| ---------------- | --------------------------- | ------------------------------ |
| **ูุฏู**          | ูุฏุฑุช ุงุดุงุก ฺฉูฺฺฉ ุฏุฑ ูุณุชู   | ุชุฑุฌูู ุขุฏุฑุณโูุง ูุฌุงุฒ ุจู ูุฒฺฉ |
| **ุณุทุญ ุนูู**      | ูุณุชู ูููฺฉุณ                 | ุณุฎุชโุงูุฒุงุฑ/ูุณุชู (MMU)           |
| **ูุงุจุณุชู ุจู**    | ุงุดุงุก ูุณุชู (ูุซู `inode`)    | ูพุฑูุณูโูุง ฺฉุงุฑุจุฑ ู ูุณุชู         |
| **ุงุจุฒุงุฑ ูุดุงูุฏู** | `slabtop`ุ `/proc/slabinfo` | `pmap`ุ `/proc/meminfo`        |
| **ูุตุฑู ุญุงูุธู**   | ุจุฑุง Cache ุงุดุงุก ูุณุชู       | ุจุฑุง ูฺฏุงุดุช ุญุงูุธู ูุฌุงุฒ         |

---

### โ **ฺุฑุง ุงู ููุงูู ููู ูุณุชูุฏุ**
- โ**Slab** โ ุงฺฏุฑ ุญุงูุธู ูุณุชู (Slab) ูพุฑ ุดูุฏุ ุณุณุชู ููฺฉู ุงุณุช **ฺฉุฑุด** ฺฉูุฏ (ูุซูุงู ุจู ุฏูู ุงูุจุงุดุช `dentry`).
- โ**Page Tables** โ ุงฺฏุฑ ุชุนุฏุงุฏ ูพุฑูุณูโูุง ุฒุงุฏ ุจุงุดุฏุ ูุตุฑู ุญุงูุธู ุชูุณุท Page Tables ุงูุฒุงุด ูโุงุจุฏ (ูุดุงูุฏู ุฏุฑ `PageTables` ุฏุฑ `/proc/meminfo`).

---

### ูุซุงู ฺฉุงุฑุจุฑุฏ:
ฑ. **ุนุจโุงุจ ุญุงูุธู Slab**:
   ```bash
   watch -n 1 "cat /proc/meminfo | grep -E 'Slab|SReclaimable|SUnreclaim'"
   ```

ฒ. **ุจุฑุฑุณ ูุตุฑู Page Tables ฺฉ ูพุฑูุณู**:
   ```bash
   pmap -x <PID>
   ```

---

### ุชูุงูุช **`free`** ู **`available`**

ุฏุฑ ุฎุฑูุฌ ุฏุณุชูุฑ `free -h` ุฏุฑ ูููฺฉุณุ ุฏู ููุฏุงุฑ **`free`** ู **`available`** ูุฑุจูุท ุจู **ุญุงูุธู ุฑู (RAM)** ูุณุชูุฏุ ุงูุง ุชูุงูุช ููู ุจู ุขููุง ูุฌูุฏ ุฏุงุฑุฏ. ุฏุฑ ุงูุฌุง ุจู ุฒุจุงู ุณุงุฏู ุชูุถุญ ูโุฏูู:

---

### ๐ **ููุงุณู `free` ู `available` ุฏุฑ ุฎุฑูุฌ `free -h`**

| ูพุงุฑุงูุชุฑ         | ุชูุถุญ ุจู ุฒุจุงู ุณุงุฏู                                                                         | ูุซุงู (ูุฑุถ) | ูฺฉุงุช ฺฉูุฏ                                                                                                                                                      |
| --------------- | ------------------------------------------------------------------------------------------ | ----------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **`free`**      | ููุฏุงุฑ **ุฑู ฺฉุงููุงู ุฎุงู ู ุจูุงุงุณุชูุงุฏู**                                                      | `1.2G`      | - ุงู ุญุงูุธู **ููู ุงูุงู ูุงุจู ุงุณุชูุงุฏู** ุงุณุช.<br>- ุงูุง ุดุงูู ุญุงูุธูโูุง **ฺฉุด ุดุฏู (cache/buffer)** ููโุดูุฏ.                                                          |
| **`available`** | ููุฏุงุฑ **ุฑู ฺฉู ุจุฑูุงููโูุง ูุงูุนุงู ูโุชูุงููุฏ ุงุณุชูุงุฏู ฺฉููุฏ** (ุญุช ุงฺฏุฑ ูุนูุงู ุงุณุชูุงุฏู ุดุฏู ุจุงุดุฏ!) | `3.5G`      | - ุดุงูู ุญุงูุธู `free` **+** ุญุงูุธูโูุง ฺฉุด ุดุฏู ูุงุจู ุขุฒุงุฏุณุงุฒ (cache/buffers)<br>- ููฺูู ุดุงูู ุญุงูุธูโูุง **ูุงุจู ุจุงุฒูพุณโฺฏุฑ (reclaimable)** ูุซู Slabูุง SReclaimable. |

---

### ๐ผ๏ธ **ุชุตูุฑุณุงุฒ ุจุง ูุซุงู**
ูุฑุถ ฺฉูุฏ ุณุณุชู ุดูุง **ด ฺฏฺฏุงุจุงุช ุฑู** ุฏุงุฑุฏ:
```
                    +---------------------+
                    |        RAM 4G       |
                    +---------------------+
                               |
         +---------------------+---------------------+
         |                     |                     |
      [Used: 2G]           [Cache: 0.8G]         [Free: 1.2G]
         |                     |
         |                (ูุงุจู ุขุฒุงุฏ ุดุฏู ุฏุฑ ุตูุฑุช ูุงุฒ)
         |
   [ุจุฑูุงููโูุง ุฏุฑ ุญุงู ุงุฌุฑุง]
```
- โ**`free` = 1.2G** (ุฑู ฺฉุงููุงู ุฎุงู).  
- โ**`available` = 1.2G (free) + 0.8G (cache) โ 2G** (ุฑู ฺฉู ุนููุงู ุจุฑุง ุจุฑูุงููโูุง ุฌุฏุฏ ุขุฒุงุฏ ุงุณุช).

---

### โ **ฺุฑุง `available` ูููโุชุฑ ุงุฒ `free` ุงุณุชุ**
- ูููฺฉุณ ุจูโุทูุฑ ุนูุฏ **ุญุงูุธู ุจูุงุงุณุชูุงุฏู ุฑุง ุจุฑุง ฺฉุด (cache) ุงุณุชูุงุฏู ูโฺฉูุฏ** ุชุง ุนููฺฉุฑุฏ ุณุณุชู ุจูุจูุฏ ุงุจุฏ.  
- ููุฏุงุฑ `free` ููฺฉู ุงุณุช **ุฎู ฺฉู** ูุดุงู ุฏุงุฏู ุดูุฏุ ุงูุง ุณุณุชู ููฺูุงู **ูพุฑููุฑููุณ ุฎูุจ ุฏุงุฑุฏ** ฺูู `available` ูุงูุน ุจุดุชุฑ ุงุณุช.  
- ุงฺฏุฑ `available` ูุฒุฏฺฉ ุจู ุตูุฑ ุดูุฏุ ุณุณุชู ุดุฑูุน ุจู **ุณูุงูพ (swap)** ูโฺฉูุฏ (ฺฉุงูุด ุนููฺฉุฑุฏ!).

---

### ๐ **ฺฺฏููู ุงู ููุงุฏุฑ ุฑุง ุจุฎูุงููุ**
ุฎุฑูุฌ ููููู `free -h`:
```
              total        used        free      shared  buff/cache   available
Mem:           7.7G        2.1G        1.2G        123M        4.4G        5.0G
Swap:          2.0G        0B          2.0G
```
- โ**`free` (1.2G)**: ุฑู ฺฉุงููุงู ุขุฒุงุฏ.  
- โ**`available` (5.0G)**: ุดุงูู `free` + ุญุงูุธูโูุง ฺฉุด/ุจุงูุฑ ฺฉู ุฏุฑ ุตูุฑุช ูุงุฒ ุขุฒุงุฏ ูโุดููุฏ.  

---

### ๐ **ฺู ุฒูุงู ูฺฏุฑุงู ุจุงุดูุ**
- ุงฺฏุฑ **`available` ฺฉูุชุฑ ุงุฒ ฑฐูช ฺฉู ุฑู** ุจุงุดุฏ (`7.7G * 0.1 โ 0.77G` ุฏุฑ ูุซุงู ุจุงูุง)ุ ุณุณุชู ุชุญุช ูุดุงุฑ ุงุณุช.  
- ุงฺฏุฑ **`available` ูุฒุฏฺฉ ุจู `free` ุจุงุดุฏ**ุ ุนู ฺฉุดโูุง ฺฉู ูุณุชูุฏ (ุงุญุชูุงูุงู ุณุณุชู ุชุงุฒู ุจูุช ุดุฏู).

---

### โ **ุฌูุนโุจูุฏ**
- โ**`free`**: ุฑู "ูุฏุฑุฑูุชู" (ุงูุง ุฏุฑ ูุงูุน ุจุฑุง ฺฉุด ููุฏ ุงุณุช!).  
- โ**`available`**: ุฑู "ูุงูุนุงู ูุงุจู ุงุณุชูุงุฏู" (ูููโุชุฑ ุงุฒ `free`).  
- **ุฎุทุง ุฑุงุฌ**: ุชุตูุฑ ุงูฺฉู `free=0` ุจู ูุนู ูุดฺฉู ุงุณุช (ุฏุฑ ุญุงู ฺฉู `available` ูุนุงุฑ ุงุตู ุงุณุช).  

ุงฺฏุฑ ููุฏุงุฑ `available` ฺฉู ุงุณุชุ ูโุชูุงูุฏ ุจุง ุฏุณุชูุฑ ุฒุฑ ุญุงูุธู ฺฉุด ุฑุง ูพุงฺฉ ฺฉูุฏ (ูููุชุงู):  
```bash
echo 3 > /proc/sys/vm/drop_caches  # ููุท ุจุฑุง ุชุณุช!
``` 



## ฺฉุงูฺฉุชูุฑ Hwmon (ูุธุงุฑุช ุณุฎุชโุงูุฒุงุฑ)

ููฺฏุงู ฺฉู ุฑู ุณุฎุชโุงูุฒุงุฑ ูุฒฺฉ (bare metal) ูุณุชุฏุ ฺฉุงูฺฉุชูุฑ hwmon ูุชุฑฺฉโูุง ูุงููุฏ ุฏูุง ู ุณุฑุนุช ููโูุง ุฑุง ุจุง ูพุดููุฏ `node_hwmon_` ุงุฑุงุฆู ูโุฏูุฏ. ุงู ููุงู ุงุทูุงุนุงุช ุงุณุช ฺฉู ูโุชูุงูุฏ ุจุง ุฏุณุชูุฑ `sensors` ุจู ุฏุณุช ุขูุฑุฏ:

```sh
# HELP node_hwmon_sensor_label Label for given chip and sensor
# TYPE node_hwmon_sensor_label gauge
node_hwmon_sensor_label{chip="platform_coretemp_0", label="core_0",sensor="temp2"} 1
node_hwmon_sensor_label{chip="platform_coretemp_0", label="core_1",sensor="temp3"} 1
# HELP node_hwmon_temp_celsius Hardware monitor for temperature (input)
# TYPE node_hwmon_temp_celsius gauge
node_hwmon_temp_celsius{chip="platform_coretemp_0",sensor="temp1"} 42
node_hwmon_temp_celsius{chip="platform_coretemp_0",sensor="temp2"} 42
node_hwmon_temp_celsius{chip="platform_coretemp_0",sensor="temp3"} 41
```

โ`node_hwmon_temp_celsius` ุฏูุง ุงุฌุฒุง ูุฎุชูู ุดูุง ุงุณุชุ ฺฉู ููฺฉู ุงุณุช ุฏุงุฑุง ูุจูโูุง ุณูุณูุฑ ูุฒ ุจุงุดูุฏ ฺฉู ุฏุฑ `node_hwmon_sensor_label` ููุงุด ุฏุงุฏู ูโุดููุฏ.

ุฏุฑ ุญุงู ฺฉู ุงู ููุฑุฏ ุจุฑุง ููู ุณุฎุชโุงูุฒุงุฑูุง ุตุฏู ููโฺฉูุฏุ ุจุฑุง ุจุฑุฎ ุจุฑุง ุฏุฑฺฉ ุงูฺฉู ุณูุณูุฑ ฺุณุชุ ุจู ูุจู ุณูุณูุฑ ูุงุฒ ุฏุงุฑุฏ. ุฏุฑ ูุชุฑฺฉโูุง ูุจูุ `temp3` ูุณุชู ุดูุงุฑู ฑ CPU ุฑุง ูุดุงู ูโุฏูุฏ.

ูโุชูุงูุฏ ูุจู `label` ุงุฒ `node_hwmon_sensor_label` ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ `group_left` ุจู `node_hwmon_temp_celsius` ูุชุตู ฺฉูุฏุ ฺฉู ุฏุฑ ยซMany-to-One ู group_leftยป ุฏุฑ ุขููุฏู  ุจุดุชุฑ ููุฑุฏ ุจุญุซ ูุฑุงุฑ ฺฏุฑูุชู ุงุณุช:

```
node_hwmon_temp_celsius
* ignoring(label) group_left(label)
node_hwmon_sensor_label
```

### ฺฉุงูฺฉุชูุฑ Stat (ุขูุงุฑ)

ฺฉุงูฺฉุชูุฑ stat ฺฉู ุชุฑฺฉุจ ุงุณุชุ ุฒุฑุง ูุชุฑฺฉโูุง ุฑุง ุงุฒ `/proc/stat` ุงุฑุงุฆู ูโุฏูุฏ. `node_boot_time_seconds` ุฒูุงู ุงุณุช ฺฉู ูุณุชู ุดุฑูุน ุจู ฺฉุงุฑ ฺฉุฑุฏู ุงุณุชุ ฺฉู ุงุฒ ุขู ูโุชูุงูุฏ ูุญุงุณุจู ฺฉูุฏ ฺู ูุฏุช ูุณุชู ูุนุงู ุจูุฏู ุงุณุช:

`time() - node_boot_time_seconds`
โโ
โ`node_intr_total` ุชุนุฏุงุฏ ููููโูุง ุณุฎุชโุงูุฒุงุฑ (hardware interrupts) ุฑุง ฺฉู ุฏุงุดุชูโุงุฏ ูุดุงู ูโุฏูุฏ. ุจู ุขู `node_interrupts_total` ฺฏูุชู ููโุดูุฏุ ุฒุฑุง ุงู ูุงู ุชูุณุท ฺฉุงูฺฉุชูุฑ interrupts ุงุณุชูุงุฏู ูโุดูุฏ ฺฉู ุจู ุฏูู ฺฉุงุฑุฏูุงูุช ุจุงูุง ุจู ุทูุฑ ูพุดโูุฑุถ ุบุฑูุนุงู ุงุณุช. ูุชุฑฺฉโูุง ุฏฺฏุฑ ูุฑุจูุท ุจู ูุฑุขูุฏูุง ูุณุชูุฏ. `node_forks_total` ฺฉ ุดูุงุฑูุฏู ุจุฑุง ุชุนุฏุงุฏ ูุฑุงุฎูุงูโูุง ุณุณุชู fork ุงุณุชุ `node_context_switches_total` ุชุนุฏุงุฏ ุชุนูุถโูุง ุฒููู (context switches) ุงุณุชุ ุฏุฑ ุญุงู ฺฉู `node_procs_blocked` ู `node_procs_running` ุชุนุฏุงุฏ ูุฑุขูุฏูุง ุฑุง ฺฉู ูุณุฏูุฏ (blocked) ุง ุฏุฑ ุญุงู ุงุฌุฑุง (running) ูุณุชูุฏุ ูุดุงู ูโุฏููุฏ.

### ฺฉุงูฺฉุชูุฑ Uname (ุงุทูุงุนุงุช Uname)

ฺฉุงูฺฉุชูุฑ uname ฺฉ ูุชุฑฺฉ ูุงุญุฏ ุจู ูุงู `node_uname_info` ุฑุง ุฏุฑ ูุนุฑุถ ููุงุด ูุฑุงุฑ ูโุฏูุฏ ฺฉู ูุจูุงู ุฏุฑ ยซูพูู Statยป  ุขู ุฑุง ุฏุฏูโุงุฏ:

```sh
# HELP node_uname_info Labeled system information as provided by the uname system call.
# TYPE node_uname_info gauge
node_uname_info{domainname="(none)",machine="x86_64",nodename="kozo", release="4.4.0-101-generic",sysname="Linux", version="#124-Ubuntu SMP Fri Nov 10 18:29:59 UTC 2017"} 1
```

ูุจู `nodename` ูุงู ูุฒุจุงู (hostname) ูุงุดู ุงุณุชุ ฺฉู ููฺฉู ุงุณุช ุจุง ูุจู ูุฏู `instance`  ุง ูุฑ ูุงู ุฏฺฏุฑุ ูุงููุฏ ูุงูโูุง ููุฌูุฏ ุฏุฑ DNSุ ฺฉู ููฺฉู ุงุณุช ุจุฑุง ุขู ุฏุงุดุชู ุจุงุดุฏุ ูุชูุงูุช ุจุงุดุฏ.

ุจุฑุง ุดูุงุฑุด ุชุนุฏุงุฏ ูุงุดูโูุง ฺฉู ูุฑ ูุณุฎู ูุณุชู ุฑุง ุงุฌุฑุง ูโฺฉููุฏุ ูโุชูุงูุฏ ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

`count by(release)(node_uname_info)`

## ฺฉุงูฺฉุชูุฑ OS (ุณุณุชู ุนุงูู)

ฺฉุงูฺฉุชูุฑ OS ุฏู ูุชุฑฺฉ `node_os_info` ู `node_os_version` ุฑุง ุฏุฑ ูุนุฑุถ ููุงุด ูุฑุงุฑ ูโุฏูุฏ ฺฉู ุงุทูุงุนุงุช ุณุณุชู ุนุงูู ุฑุง ุจู ุดูุง ุงุฑุงุฆู ูโุฏููุฏ:

```sh
# HELP node_os_info A metric with a constant '1' value labeled by build_id, id, id_like, image_id, image_version, name, pretty_name, variant, variant_id, version, version_codename, version_id.
# TYPE node_os_info gauge
node_os_info{build_id="22.05.20220912.bf014ca",id="nixos", id_like="",image_id="",image_version="",name="NixOS", pretty_name="NixOS 22.05 (Quokka)",variant="", variant_id="",version="22.05 (Quokka)", version_codename="quokka",version_id="22.05"} 1
# HELP node_os_version Metric containing the major.minor part of the OS version.
# TYPE node_os_version gauge
node_os_version{id="nixos",id_like="",name="NixOS"} 22.05
```

ุจุฑุง ุดูุงุฑุด ุชุนุฏุงุฏ ูุงุดูโูุง ฺฉู ูุฑ ูุณุฎู ุชูุฒุน (distro) ุฑุง ุงุฌุฑุง ูโฺฉููุฏุ ูโุชูุงูุฏ ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:
`count by(name, version)(node_os_info)`


## ฺฉุงูฺฉุชูุฑ Loadavg (ูุงูฺฏู ุจุงุฑ)

ุฌูุนโุขูุฑูุฏู loadavg ูุงูฺฏู ุจุงุฑูุง 1ุ 5 ู 15 ุฏููู ุฑุง ุจู ุชุฑุชุจ ุจู ุนููุงู `node_load1`ุ `node_load5` ู `node_load15` ุงุฑุงุฆู ูโฺฉูุฏ.




#### **ฺฉุงูฺฉุชูุฑ `loadavg` ุฏุฑ Prometheus ฺุณุชุ**  
ฺฉุงูฺฉุชูุฑ `loadavg` (ูุฎูู **Load Average**) ุฏุฑ Prometheus (ูุนูููุงู ุงุฒ ุทุฑู **`node_exporter`**) ฺฉ ูุชุฑฺฉ ฺฉูุฏ ุจุฑุง ุงูุฏุงุฒูโฺฏุฑ **ูุงูฺฏู ุจุงุฑ ูพุฑุฏุงุฒุด (Load) ุณุณุชู** ุฏุฑ ุจุงุฒูโูุง ุฒูุงู ูุฎุชูู ุงุฑุงุฆู ูโุฏูุฏ. ุงู ฺฉุงูฺฉุชูุฑ ุฏุงุฏูโูุง ูุฑุจูุท ุจู ุตู ุงุฌุฑุง ูพุฑุฏุงุฒุดโูุง ุฑุง ุงุฒ ูุงู `/proc/loadavg` ูููฺฉุณ ุฌูุนโุขูุฑ ูโฺฉูุฏ.

---

#### โ๐ **Load Average ฺุณุชุ**
โLoad Average ูุดุงูโุฏููุฏู **ุชุนุฏุงุฏ ูพุฑุฏุงุฒุดโูุง ุฏุฑ ุญุงู ุงุฌุฑุง ุง ููุชุธุฑ ุจุฑุง ุงุฌุฑุง** (ุฏุฑ ุตู CPU ู I/O) ุฏุฑ ุณู ุจุงุฒู ุฒูุงู ุงุณุช:  
- **ฑ ุฏูููโุง (`avg1`)**  
- **ต ุฏูููโุง (`avg5`)**  
- **ฑต ุฏูููโุง (`avg15`)**  

ูุซุงู ุฎุฑูุฌ ุงุฒ `/proc/loadavg`:
```
1.25 0.80 0.50 2/100 3510
```
- ุณู ุนุฏุฏ ุงูู: Load Average ุจุฑุง ฑุ ต ู ฑต ุฏููู.  
- `2/100`: ฒ ูพุฑุฏุงุฒุด ุฏุฑ ุญุงู ุงุฌุฑุง ุงุฒ ฑฐฐ ูพุฑุฏุงุฒุด ฺฉู.  
- `3510`: ุขุฎุฑู PID ุงุฎุชุตุงุตโุงูุชู.  

---

#### ๐ **ูุชุฑฺฉโูุง ฺฉุงูฺฉุชูุฑ `loadavg` ุฏุฑ Prometheus**
ุฏุฑ `node_exporter`ุ ุงู ูุชุฑฺฉโูุง ุชุญุช ูุงู ุฒุฑ ฺฏุฒุงุฑุด ูโุดููุฏ:
```promql
node_load1   # ูุงูฺฏู ุจุงุฑ ฑ ุฏูููโุง
node_load5   # ูุงูฺฏู ุจุงุฑ ต ุฏูููโุง
node_load15  # ูุงูฺฏู ุจุงุฑ ฑต ุฏูููโุง
```

---

#### ๐ **ุชูุงูุช Load Average ู Usage CPU**
| ูุนุงุฑ                | Load Average                                         | CPU Usage                           |
| -------------------- | ---------------------------------------------------- | ----------------------------------- |
| **ูุญูู ุงูุฏุงุฒูโฺฏุฑ** | ุชุนุฏุงุฏ ูพุฑุฏุงุฒุดโูุง ุฏุฑ ุตู ุงุฌุฑุง (CPU + I/O)              | ุฏุฑุตุฏ ุงุณุชูุงุฏู ุงุฒ CPU                 |
| **ููุฏุงุฑ ุงุฏูโุขู**    | โค ุชุนุฏุงุฏ ูุณุชูโูุง CPU                                 | โค ทฐ-ธฐูช                            |
| **ฺฏููฺฏุงู**           | ุงฺฏุฑ ุจุดุชุฑ ุงุฒ ุชุนุฏุงุฏ ูุณุชูโูุง ุจุงุดุฏุ ุณุณุชู ุงุดุจุงุน ุดุฏู ุงุณุช | ุงฺฏุฑ ฑฐฐูช ุจุงุดุฏุ CPU ฺฉุงููุงู ูุดุบูู ุงุณุช |

---

#### โ **ฺฺฏููู ุชูุณุฑ ฺฉููุ**
- ุงฺฏุฑ ุณุณุชู **ด ูุณุชูโุง** ุฏุงุดุชู ุจุงุดุฏ:  
  - `node_load5 = 4` โ ุณุณุชู ฺฉุงููุงู ูุดุบูู ุงุณุช.  
  - `node_load5 > 4` โ ูพุฑุฏุงุฒุดโูุง ุฏุฑ ุตู ุงูุชุธุงุฑ ูุณุชูุฏ (ุงุดุจุงุน CPU ุง I/O).  
  - `node_load5 < 4` โ ุณุณุชู ุธุฑูุช ุขุฒุงุฏ ุฏุงุฑุฏ.  

---

#### ๐ **ฺฉุงุฑุจุฑุฏูุง ุนูู ุฏุฑ Prometheus**
##### ฑ. **ูุดุฏุงุฑ ุจุฑุง Load ุจุงูุง**
```promql
# ูุดุฏุงุฑ ุงฺฏุฑ Load ูุชูุณุท ต ุฏููู ุจุด ุงุฒ ธฐููช ุธุฑูุช CPU ุจุงุดุฏ
expr: node_load5 / count(count(node_cpu_seconds_total{mode="idle"}) by (cpu)) > 0.8
```

##### ฒ. **ููุงุณู Load ุจุง ุชุนุฏุงุฏ ูุณุชูโูุง**
```promql
# ูุณุจุช Load ุจู ุชุนุฏุงุฏ ูุณุชูโูุง
node_load5 / count(node_cpu_seconds_total{mode="system"}) by (instance)
```

##### ณ. **ุชูฺฉฺฉ Load ูุงุด ุงุฒ CPU vs I/O**
- ุงฺฏุฑ `node_load5` ุจุงูุง ุงุณุช ูู `avg(rate(node_cpu_seconds_total{mode="idle"}[5m]))` ูพุงู ูุณุชุ ุงุญุชูุงูุงู **ฺฏููฺฏุงู I/O** ูุฌูุฏ ุฏุงุฑุฏ.

---

#### ๐ **ููููู ฺฏุฑุงู ุฏุฑ Grafana**
ูโุชูุงูุฏ Load Average ุฑุง ููุฑุงู ุจุง **ูุตุฑู CPU** ู **I/O Wait** ุฏุฑ ฺฉ ุฏุงุดุจูุฑุฏ ููุงุด ุฏูุฏ:  
```promql
node_load5
rate(node_cpu_seconds_total{mode="iowait"}[5m])
```

---

##### โ **ุฌูุนโุจูุฏ**
- **ฺฉุงูฺฉุชูุฑ `loadavg`** ุฏุฑ `node_exporter` ุฏุงุฏูโูุง Load Average ุณุณุชู ุฑุง ุฌูุนโุขูุฑ ูโฺฉูุฏ.  
- โ**Load Average** ูุนุงุฑ ุจุฑุง **ุตู ุงุฌุฑุง ูพุฑุฏุงุฒุดโูุง** ุงุณุช (ูู ุตุฑูุงู ูุตุฑู CPU!).  
- ููุฏุงุฑ ุจุงูุง Load ูโุชูุงูุฏ ูุดุงูโุฏููุฏู **ุงุดุจุงุน CPU** ุง **ฺฏููฺฏุงู I/O** ุจุงุดุฏ.  
- ุจุฑุง ุชูุณุฑ ุตุญุญุ ููุดู Load ุฑุง ุจุง **ุชุนุฏุงุฏ ูุณุชูโูุง CPU** ููุงุณู ฺฉูุฏ.  

-------



ูุนู ุงู ูุชุฑฺฉ ุฏุฑ ูพูุชูุฑูโูุง ูุฎุชูู ูุชูุงูุช ุงุณุช ู ููฺฉู ุงุณุช ุขู ฺุฒ ูุจุงุดุฏ ฺฉู ุดูุง ูฺฉุฑ ูโฺฉูุฏ. ุจุฑุง ูุซุงูุ ุฏุฑ ูููฺฉุณุ ุงู ููุท ุชุนุฏุงุฏ ูุฑุขูุฏูุง ูุณุช ฺฉู ุฏุฑ ุตู ุงุฌุฑุง ููุชุธุฑ ูุณุชูุฏุ ุจูฺฉู ูุฑุขูุฏูุง ุบุฑูุงุจู ูุทุน ุดุฏู ูุงููุฏ ูุฑุขูุฏูุง ฺฉู ููุชุธุฑ ูุฑูุฏ/ุฎุฑูุฌ ูุณุชูุฏ ูุฒ ุดุงูู ูโุดูุฏ.

ุฌูุนโุขูุฑูุฏู loadavg ูุงูฺฏู ุจุงุฑูุง 1ุ 5 ู 15 ุฏููู ุฑุง ุจู ุชุฑุชุจ ุจู ุนููุงู `node_load1`ุ `node_load5` ู `node_load15` ุงุฑุงุฆู ูโฺฉูุฏ.

ูุนู ุงู ูุชุฑฺฉ ุฏุฑ ูพูุชูุฑูโูุง ูุฎุชูู ูุชูุงูุช ุงุณุช ู ููฺฉู ุงุณุช ุขู ฺุฒ ูุจุงุดุฏ ฺฉู ุดูุง ูฺฉุฑ ูโฺฉูุฏ. ุจุฑุง ูุซุงูุ ุฏุฑ ูููฺฉุณุ ุงู ููุท ุชุนุฏุงุฏ ูุฑุขูุฏูุง ูุณุช ฺฉู ุฏุฑ ุตู ุงุฌุฑุง ููุชุธุฑ ูุณุชูุฏุ ุจูฺฉู ูุฑุขูุฏูุง ุบุฑูุงุจู ูุทุน ุดุฏู ูุงููุฏ ูุฑุขูุฏูุง ฺฉู ููุชุธุฑ ูุฑูุฏ/ุฎุฑูุฌ ูุณุชูุฏ ูุฒ ุดุงูู ูโุดูุฏ.

ุงฺฏุฑ ูุณุชู ุดูุง ุจู ุงูุฏุงุฒู ฺฉุงู ุฌุฏุฏ ุงุณุชุ ุชูุตู ูโฺฉูู ุงุฒ ุฌูุนโุขูุฑูุฏู ูุดุงุฑ (pressure collector) ุงุณุชูุงุฏู ฺฉูุฏ.
ูุงูฺฏู ุจุงุฑูุง ูโุชูุงููุฏ ุจุฑุง ฺฉ ุงุฏู ุณุฑุน ููุฏ ุจุงุดูุฏ ฺฉู ุขุง ฺฉ ุฏุณุชฺฏุงู ุงุฎุฑุงู ุดููุบโุชุฑ ุดุฏู ุงุณุช (ุจุฑุง ุจุฑุฎ ุชุนุงุฑู ุดููุบโุชุฑ)ุ ุงูุง ุงูุชุฎุงุจ ุฎูุจ ุจุฑุง ูุดุฏุงุฑ ุฏุงุฏู ูุณุชูุฏ. 

ุงู ฺฉ ุนุฏุฏ ุงุญููุงูู ุงุณุช ุงูุง ูุฑุฏู ูฺฉุฑ ูโฺฉููุฏ ููู ุงุณุช.
> โ ฺฉ ูุธุฑ ุฏุฑ ูุงู loadavg.c ูููฺฉุณ.

## ฺฉุงูฺฉุชูุฑ Pressure (ูุดุงุฑ)

ุงุทูุงุนุงุช ุชููู ูุดุงุฑ (Pressure Stall Information - PSI) ุฏุฑ ูุณุชู ูููฺฉุณ ูุณุฎู 4.20 ูุนุฑู ุดุฏ. ุงู ูุชุฑฺฉโูุง ูุดุงุฑ ููุงุจุน ุฑุง ุจุฑุง ุณู ููุจุน ุงูุฏุงุฒูโฺฏุฑ ูโฺฉููุฏ: CPUุ ุญุงูุธู ู ูุฑูุฏ/ุฎุฑูุฌ (I/O). ุงู ูุงุจูุช ุจุงุฏ ุฏุฑ ุฒูุงู ฺฉุงููพุงู ุฏุฑ ูุณุชู ูุนุงู ุดูุฏ.

ููฺฉู ุงุณุช ูุณุชู ุดูุง ุจุง ูพุดุชุจุงู PSI ุณุงุฎุชู ุดุฏู ุจุงุดุฏ ุงูุง ุจู ุทูุฑ ูพุดโูุฑุถ ุบุฑูุนุงู ุจุงุดุฏุ ุฏุฑ ุงู ุตูุฑุช ูโุชูุงูุฏ ุฏุฑ ุฒูุงู ุจูุช (boot) `psi=1` ุฑุง ุฏุฑ ุฎุท ูุฑูุงู ูุณุชู (kernel command line) ุจุฑุง ูุนุงู ฺฉุฑุฏู ุขู ุงุฑุณุงู ฺฉูุฏ. ูพูุฌ ูุชุฑฺฉ ูุฎุชูู ุชูุณุท ฺฉุงูฺฉุชูุฑ PSI ุฏุฑ ูุนุฑุถ ููุงุด ูุฑุงุฑ ูโฺฏุฑูุฏ:

```sh
# HELP node_pressure_cpu_waiting_seconds_total Total time in seconds that processes have waited for CPU time
# TYPE node_pressure_cpu_waiting_seconds_total counter
node_pressure_cpu_waiting_seconds_total 113.6605130
# HELP node_pressure_io_stalled_seconds_total Total time in seconds no process could make progress due to IO congestion
# TYPE node_pressure_io_stalled_seconds_total counter
node_pressure_io_stalled_seconds_total 8.630361
# HELP node_pressure_io_waiting_seconds_total Total time in seconds that processes have waited due to IO congestion
# TYPE node_pressure_io_waiting_seconds_total counter
node_pressure_io_waiting_seconds_total 9.609997
# HELP node_pressure_memory_stalled_seconds_total Total time in seconds no process could make progress
# TYPE node_pressure_memory_stalled_seconds_total counter
node_pressure_memory_stalled_seconds_total 0
# HELP node_pressure_memory_waiting_seconds_total Total time in seconds that processes have waited for memory
# TYPE node_pressure_memory_waiting_seconds_total counter
node_pressure_memory_waiting_seconds_total 0
```


#### **โPressure Stall Information (PSI) ฺุณุชุ**  
โ**PSI** ฺฉ ูุงุจูุช ุฏุฑ ูุณุชู ูููฺฉุณ (ุงุฒ ูุณุฎู ดูซฒฐ ุจู ุจุนุฏ) ุงุณุช ฺฉู **ูุดุงุฑ (Pressure) ุฑู ููุงุจุน ุณุณุชู ูุซู CPUุ ุญุงูุธู (RAM)ุ ู I/O** ุฑุง ุงูุฏุงุฒูโฺฏุฑ ูโฺฉูุฏ. ุจุฑุฎูุงู ูุนุงุฑูุง ุณูุช (ูุซู `load average` ุง `free memory`) ฺฉู ููุท ูุถุนุช ูุญุธูโุง ุฑุง ูุดุงู ูโุฏููุฏุ PSI **ุชุฃุฎุฑูุง ูุงุด ุงุฒ ฺฉูุจูุฏ ููุงุจุน** ุฑุง ฺฏุฒุงุฑุด ูโุฏูุฏ ู ุจู ุดูุง ูโฺฏูุฏ:  
**ยซฺูุฏุฑ ุฒูุงู ุจู ุฏูู ฺฉูุจูุฏ ฺฉ ููุจุนุ ูพุฑุฏุงุฒุดโูุง ูุชููู (Stall) ุดุฏูโุงูุฏุยป**  

---

## ๐ **ฺุฑุง PSI ููู ุงุณุชุ**
- **ุชุดุฎุต ูุดฺฉูุงุช ฺฉุงุฑุง** (ูุซูุงู ฺฉูุฏ ุณุณุชู ุจู ุฏูู ฺฉูุจูุฏ RAM ุง I/O).  
- **ูพุดโุจู ูุดฺฉูุงุช ูุจู ุงุฒ ูููุน** (ูุซูุงู ูุจู ุงุฒ ูพุฑ ุดุฏู ฺฉุงูู ุญุงูุธู).  
- **ุจูุชุฑ ุงุฒ `load average`** ฺูู ุนูุช ุชุฃุฎุฑ (CPUุ ุญุงูุธูุ ุง I/O) ุฑุง ูุดุฎุต ูโฺฉูุฏ.  

---

## ๐ **ุงููุงุน ูุดุงุฑ (Pressure) ุฏุฑ PSI**
ุณู ููุน ูุดุงุฑ ุงุตู ุงูุฏุงุฒูโฺฏุฑ ูโุดูุฏ:  

### ฑ. **CPU Pressure (`cpu.pressure`)**  
- ุฒูุงู ฺฉู **ูพุฑุฏุงุฒุดโูุง ููุชุธุฑ CPU ูโูุงููุฏ** (ุจู ุฏูู ุงุดุจุงุน ุดุฏู CPU).  
- ูุซุงู: ููุช ฺูุฏู ูพุฑุฏุงุฒุด ุณูฺฏู ููุฒูุงู ุงุฌุฑุง ูโุดููุฏ.  

### ฒ. **ุญุงูุธู (RAM) Pressure (`memory.pressure`)**  
- ุฒูุงู ฺฉู **ุณุณุชู ุจู ุฏูู ฺฉูุจูุฏ ุญุงูุธู ูุฌุจูุฑ ุจู ุตูุญูโุจูุฏ (paging) ุง ุณูุงูพ (swap)** ูโุดูุฏ.  
- ูุซุงู: ููุช `available memory` ฺฉู ุงุณุช ู ุณุณุชู ุดุฑูุน ุจู ุงุณุชูุงุฏู ุงุฒ `swap` ูโฺฉูุฏ.  

### ณ. **I/O Pressure (`io.pressure`)**  
- ุฒูุงู ฺฉู **ูพุฑุฏุงุฒุดโูุง ููุชุธุฑ ุนููุงุช I/O (ูุซู ุฎูุงูุฏู/ููุดุชู ุฏุณฺฉ)** ูโูุงููุฏ.  
- ูุซุงู: ููุช ุฏุณฺฉ ฺฉูุฏ ุงุณุช ุง ุจุงุฑ I/O ุจุณุงุฑ ุจุงูุง ุงุณุช.  

---

## ๐ **ฺฺฏููู PSI ุฑุง ุจุฎูุงููุ**
ุงุทูุงุนุงุช PSI ุฏุฑ ูุงูโูุง ุฒุฑ ุฏุฑ `/proc` ููุฌูุฏ ุงุณุช:  
- `/proc/pressure/cpu`  
- `/proc/pressure/memory`  
- `/proc/pressure/io`  

### ูุซุงู ุฎุฑูุฌ ุจุฑุง `memory.pressure`:
```bash
cat /proc/pressure/memory
```
ุฎุฑูุฌ:
```
some avg10=5.23 avg60=2.05 avg300=1.23 total=123456789
full avg10=1.87 avg60=0.75 avg300=0.30 total=98765432
```
- โ**`some`**: ุฏุฑุตุฏ ุฒูุงู ฺฉู **ุญุฏุงูู ฺฉ ูพุฑุฏุงุฒุด** ุจู ุฏูู ฺฉูุจูุฏ ุญุงูุธู ูุชููู ุดุฏู.  
- โ**`full`**: ุฏุฑุตุฏ ุฒูุงู ฺฉู **ููู ูพุฑุฏุงุฒุดโูุง** ุจู ุฏูู ฺฉูุจูุฏ ุญุงูุธู ูุชููู ุดุฏูโุงูุฏ (ุดุฑุงุท ุจุญุฑุงู!).  
- โ**`avg10`/`avg60`/`avg300`**: ูุงูฺฏู ูุดุงุฑ ุฏุฑ ฑฐ ุซุงููุ ฑ ุฏููู ู ต ุฏููู ฺฏุฐุดุชู.  
- โ**`total`**: ฺฉู ูฺฉุฑูุซุงููโูุง ุชุฃุฎุฑ ุงุฒ ุฒูุงู ุจูุช ุณุณุชู.  

---

## ๐ **ฺฉุงุฑุจุฑุฏูุง PSI**
### ฑ. **ูุงูุชูุฑูฺฏ ูุญุธูโุง**
```bash
watch -n 1 "cat /proc/pressure/{cpu,memory,io}"
```

### ฒ. **ูุดุฏุงุฑุฏู (Alerting)**
ูุซูุงู ุงฺฏุฑ ูุดุงุฑ ุญุงูุธู (`full`) ุจุด ุงุฒ ฑฐูช ุฏุฑ ต ุฏููู ุจุงุดุฏ:  
```bash
avg300=$(cat /proc/pressure/memory | grep full | awk '{print $3}' | cut -d= -f2)
[ $(echo "$avg300 > 10" | bc) -eq 1 ] && echo "โ๏ธ Memory pressure too high!"
```

### ณ. **ุชูุธูุงุช `cgroups` ุจุฑุง ูุญุฏูุฏุช ููุงุจุน**
ุจุง PSI ูโุชูุงูุฏ **ุณุงุณุชโูุง ุชุฎุตุต ููุงุจุน** ุฑุง ุจุฑ ุงุณุงุณ ูุดุงุฑ ุณุณุชู ุชุนู ฺฉูุฏ (ูุซูุงู ุงูููุชโุฏู ุจู ูพุฑุฏุงุฒุดโูุง ุฎุงุต).  

---

## ๐ก **ููุงุณู PSI ุจุง ูุนุงุฑูุง ุณูุช**
| ูุนุงุฑ | PSI | `load average` | `free -h` |
|-------|-----|---------------|----------|
| **ูุญูู ุงูุฏุงุฒูโฺฏุฑ** | ุชุฃุฎุฑูุง ูุงูุน ูพุฑุฏุงุฒุดโูุง | ุชุนุฏุงุฏ ูพุฑุฏุงุฒุดโูุง ุฏุฑ ุตู ุงุฌุฑุง | ุญุงูุธู ุขุฒุงุฏ/ูุตุฑูโุดุฏู |
| **ุชุดุฎุต ฺฏููฺฏุงู** | ุฏููุงู ูุดุฎุต ูโฺฉูุฏ (CPU/RAM/I/O) | ููุท ฺฉูุงุช ุฑุง ูุดุงู ูโุฏูุฏ | ููุท ูุถุนุช ุญุงูุธู ุฑุง ูุดุงู ูโุฏูุฏ |
| **ูพุดโุจู ูุดฺฉูุงุช** | ุจูู (ูุจู ุงุฒ ูููุน) | ุฎุฑ | ุฎุฑ |

---

## ๐จ **ฺู ุฒูุงู PSI ุฎุทุฑูุงฺฉ ุงุณุชุ**
- ุงฺฏุฑ `full` ุจุฑุง ุญุงูุธู (`memory.pressure`) ุจุด ุงุฒ **ฑฐูช** ุจุงุดุฏ โ ุณุณุชู ุฏุฑ ุญุงู ุงุณุชูุงุฏู ุณูฺฏู ุงุฒ **ุณูุงูพ (swap)** ุงุณุช.  
- ุงฺฏุฑ `some` ุจุฑุง I/O (`io.pressure`) ุจุด ุงุฒ **ฒฐูช** ุจุงุดุฏ โ ุฏุณฺฉ ุดูุง **ฺฏููฺฏุงู** ุงุณุช.  
- ุงฺฏุฑ `full` ุจุฑุง CPU (`cpu.pressure`) ุจุงูุง ุจุงุดุฏ โ ูพุฑุฏุงุฒูุฏู **ฺฉุงููุงู ุงุดุจุงุน** ุดุฏู ุงุณุช.  

---

## โ **ุฌูุนโุจูุฏ**
- โ**PSI** ูุนุงุฑ ููุดููุฏ ุจุฑุง ุชุดุฎุต **ฺฏููฺฏุงูโูุง ููุงุจุน ุณุณุชู** ุงุณุช.  
- ุชูุงูุช ุงุตู ุขู ุจุง ุงุจุฒุงุฑูุง ูุฏู: **ุงูุฏุงุฒูโฺฏุฑ ุชุฃุฎุฑูุง ูุงูุน (Stall Time)** ุจู ุฌุง ููุงุด ุตุฑู ูุตุฑู ููุงุจุน.  
- ุจุฑุง ุณุฑูุฑูุง ุญุงุชุ ูุงูุชูุฑูฺฏ PSI **ุถุฑูุฑ** ุงุณุช (ูุฎุตูุตุงู ุจุฑุง ุญุงูุธู ู I/O).  

ุงฺฏุฑ ูโุฎูุงูุฏ PSI ุฑุง ุฏุฑ ุงุจุฒุงุฑูุง ูุซู **Prometheus** ุง **Grafana** ุงุฏุบุงู ฺฉูุฏุ ุงุฒ **ุงฺฉุณูพูุฑุชุฑูุง ูุซู `node_exporter`** (ุจุง ูุนุงู ฺฉุฑุฏู ูุงุจูุช PSI) ุงุณุชูุงุฏู ฺฉูุฏ. 

ูุชุฑฺฉโูุง `waiting` ูุดุงูโุฏููุฏู ฺฉู ุฒูุงู ุจู ุซุงูู ุงุณุช ฺฉู ุจุฑุฎ ูุธุงู ููุชุธุฑ ุจูุฏูโุงูุฏุ ู `stalled` ุจู ุงู ูุนู ุงุณุช ฺฉู ุชูุงู ูุธุงู ุจู ุฏูู ฺฉูุจูุฏ ููุงุจุน ุจู ุชุฃุฎุฑ ุงูุชุงุฏูโุงูุฏ. ุญุงูุธู ู I/O ูุฑ ุฏู ูุชุฑฺฉ `waiting` ู `stalled` ุฏุงุฑูุฏุ ุฏุฑ ุญุงู ฺฉู CPU ููุท `waiting` ุฏุงุฑุฏ. ุงู ุจู ุงู ุฏูู ุงุณุช ฺฉู CPU ููุดู ุฏุฑ ุญุงู ุงุฌุฑุง ฺฉ ูุฑุขูุฏ ุงุณุช.

ุงุฒ ุขูุฌุง ฺฉู ุงูโูุง ุดูุงุฑูุฏู ูุณุชูุฏุ ูโุชูุงูุฏ ุงุฒ ุขูโูุง ุจุง ุชุงุจุน `rate()` ุจุฑุง ุชุนู ุงูฺฉู ุขุง ุจุฑุฎ ููุงุจุน ุจุด ุงุฒ ุญุฏ ุจุงุฑฺฏุฐุงุฑ ุดุฏูโุงูุฏ ุงุณุชูุงุฏู ฺฉูุฏ:

`rate(node_pressure_memory_waiting_seconds_total[1m])`

### ฺฉุงูฺฉุชูุฑ Textfile (ูุงู ูุชู)

ฺฉุงูฺฉุชูุฑ textfile ฺฉู ุจุง ฺฉุงูฺฉุชูุฑูุง ฺฉู ูุจูุงู ุจู ุดูุง ูุดุงู ุฏุงุฏู ูุชูุงูุช ุงุณุช. ุงู ฺฉุงูฺฉุชูุฑ ูุชุฑฺฉโูุง ุฑุง ุงุฒ ูุณุชู ุจู ุฏุณุช ููโุขูุฑุฏุ ุจูฺฉู ุงุฒ ูุงูโูุง ฺฉู ุดูุง ุชููุฏ ูโฺฉูุฏุ ุจู ุฏุณุช ูโุขูุฑุฏ. ุงฺฉุณูพูุฑุชุฑ ููุฏ ูุฑุงุฑ ูุณุช ุจู ุนููุงู ุฑูุช ุงุฌุฑุง ุดูุฏุ ุจูุงุจุฑุงู ูุชุฑฺฉโูุง ูุงููุฏ ูุชุฑฺฉโูุง SMARTยนโฐ ุจุฑุง ุงุฌุฑุง ุฏุณุชูุฑ `smartctl` ุจู ุงูุชุงุฒุงุช ุฑูุช (root privileges) ูุงุฒ ุฏุงุฑูุฏ. ุนูุงูู ุจุฑ ูุชุฑฺฉโูุง ฺฉู ุจู ุฑูุช ูุงุฒ ุฏุงุฑูุฏุ ุจุฑุฎ ุงุทูุงุนุงุช ุฑุง ููุท ุจุง ุงุฌุฑุง ุฏุณุชูุฑ ูุงููุฏ `iptables` ูโุชูุงูุฏ ุจู ุฏุณุช ุขูุฑุฏ. ุจุฑุง ุงุทููุงูโูพุฐุฑุ ุงฺฉุณูพูุฑุชุฑ ููุฏ ูุฑุขูุฏูุง ุฑุง ุดุฑูุน ููโฺฉูุฏ.

ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ฺฉุงูฺฉุชูุฑ textfileุ ุดูุง ฺฉ ฺฉุฑุงูโุฌุงุจ (cronjob) ุงุฌุงุฏ ูโฺฉูุฏ ฺฉู ุจู ุทูุฑ ููุธู ุฏุณุชูุฑุงุช ูุงููุฏ `smartctl` ุง `iptables` ุฑุง ุงุฌุฑุง ูโฺฉูุฏุ ุฎุฑูุฌ ุขู ุฑุง ุจู ูุฑูุช ููุงุด ูุชู ูพุฑููุชุฆูุณ (Prometheus text exposition format) ุชุจุฏู ูโฺฉูุฏ ู ุขู ุฑุง ุจู ุตูุฑุช ุงุชู (atomically) ุฏุฑ ูุงู ุฏุฑ ฺฉ ุฏุงุฑฺฉุชูุฑ ูุดุฎุต ูโููุณุฏ. ุฏุฑ ูุฑ ุงุณฺฉุฑููพ (scrape)ุ ุงฺฉุณูพูุฑุชุฑ ููุฏ ูุงูโูุง ููุฌูุฏ ุฏุฑ ุขู ุฏุงุฑฺฉุชูุฑ ุฑุง ูโุฎูุงูุฏ ู ูุชุฑฺฉโูุง ุขูโูุง ุฑุง ุฏุฑ ุฎุฑูุฌ ุฎูุฏ ูุฑุงุฑ ูโุฏูุฏ.

ุณุฑูุฑ ูพุฑููุชุฆูุณ ููโุชูุงูุฏ ูุงูโูุง ูุชู ุฑุง ูุณุชููุงู ุจุฎูุงูุฏุ ุจูุงุจุฑุงู ุดูุง ุจู ูุฑูโุงูุฒุงุฑ ูุงุฒ ุฏุงุฑุฏ ุชุง ูุงู ุฑุง ุจู ุตูุฑุช HTTP ุฏุฑ ูุนุฑุถ ููุงุด ูุฑุงุฑ ุฏูุฏ. ุฏุฑ ุญุงู ฺฉู ูโุชูุงูุฏ ุงุฒ ูุฑ ุณุฑูุฑ HTTP ุงุณุชูุงุฏู ฺฉูุฏุ ุงฺฉุณูพูุฑุชุฑ ููุฏ ููฺูู ุตุญุช ูุชุฑฺฉโูุง ุฑุง ุจุฑุฑุณ ูโฺฉูุฏ ู ูุงุฏุฑ ุงุณุช ูุชุฑฺฉโูุง ุญุงุตู ุงุฒ ฺูุฏู ูุงู ุฑุง ุฏุฑ ูุนุฑุถ ููุงุด ูุฑุงุฑ ุฏูุฏ.

ูโุชูุงูุฏ ุงุฒ ุงู ฺฉุงูฺฉุชูุฑ ุจุฑุง ุงูุฒูุฏู ูุชุฑฺฉโูุง ุฎูุฏ ุงุฒ ุทุฑู ฺฉุฑุงูโุฌุงุจโูุง ุงุณุชูุงุฏู ฺฉูุฏุ ุง ูโุชูุงูุฏ ุงุทูุงุนุงุช ุงุณุชุง (static) ุจุดุชุฑ ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุงุฒ ูุงูโูุง ูโุขูุฏ ฺฉู ุชูุณุท ุณุณุชู ูุฏุฑุช ูพฺฉุฑุจูุฏ ูุงุดู (machine configuration management system) ุดูุง ููุดุชู ุดุฏูโุงูุฏ ุชุง ุจุฑุฎ ูุชุฑฺฉโูุง ุงุทูุงุนุงุช (info metrics) ุฑุง ุงุฑุงุฆู ุฏููุฏุ ูุงููุฏ ุงูฺฉู ฺู ููุดโูุง Chefยนยน ุฑุง ุฏุงุฑุฏุ ุฏุฑุจุงุฑู ูุงุดู.

ูุงููุฏ ุงฺฉุณูพูุฑุชุฑ ููุฏ ุจู ุทูุฑ ฺฉูุ ฺฉุงูฺฉุชูุฑ textfile ุจุฑุง ูุชุฑฺฉโูุง ูุฑุจูุท ุจู ฺฉ ูุงุดู ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุดุฏู ุงุณุช. ุจู ุนููุงู ูุซุงูุ ููฺฉู ุงุณุช ูุชุฑฺฉ ูุณุชูโุง ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุงฺฉุณูพูุฑุชุฑ ููุฏ ูููุฒ ุขู ุฑุง ุฏุฑ ูุนุฑุถ ููุงุด ูุฑุงุฑ ููโุฏูุฏุ ุง ุจุฑุง ุฏุณุชุฑุณ ุจู ุฑูุช ูุงุฒ ุฏุงุฑุฏ. ููฺฉู ุงุณุช ุจุฎูุงูุฏ ูุชุฑฺฉโูุง ุณุทุญ ุณุณุชู ุนุงูู ุจุดุชุฑ ุฑุง ุฑุฏุงุจ ฺฉูุฏุ ูุงููุฏ ุงูฺฉู ุขุง ุจูโุฑูุฒุฑุณุงูโูุง ุจุณุชู ุฏุฑ ุงูุชุธุงุฑ ูุณุชูุฏ ุง ูุงุฒ ุจู ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ (reboot) ูุฌูุฏ ุฏุงุฑุฏ. ุฏุฑ ุญุงู ฺฉู ุงุฒ ูุธุฑ ูู ฺฉ ุณุฑูุณ ุงุณุช ุชุง ฺฉ ูุชุฑฺฉ ุณุณุชู ุนุงููุ ุซุจุช ุฒูุงู ุขุฎุฑู ุชฺฉูู ฺฉุงุฑูุง ุฏุณุชูโุง (batch jobs) ูุงููุฏ ูพุดุชุจุงูโฺฏุฑ (backups) ุจุฑุง ููุฏ Cassandraยนยฒ ฺฉู ุฑู ูุงุดู ุงุฌุฑุง ูโุดูุฏ ูุฒ ุงุณุชูุงุฏู ุฎูุจ ุงุฒ ฺฉุงูฺฉุชูุฑ textfile ุฎูุงูุฏ ุจูุฏุ ุฒุฑุง ุนูุงูู ุดูุง ุจู ุงูฺฉู ุขุง ูพุดุชุจุงูโฺฏุฑโูุง ุฑู ุขู ูุงุดู ฺฉุงุฑ ฺฉุฑุฏูโุงูุฏุ ุจุง ุงุฒ ุจู ุฑูุชู ูุงุดู ุงุฒ ุจู ูโุฑูุฏ. ุนู ููุฏ Cassandra ฺุฑุฎู ุนูุฑ (lifecycle) ูุดุงุจู ุจุง ูุงุดู ุฏุงุฑุฏ.

ฺฉุงูฺฉุชูุฑ textfile ูุจุงุฏ ุจุฑุง ุชุจุฏู ูพุฑููุชุฆูุณ ุจู ุญุงูุช ูพูุด (push) ุงุณุชูุงุฏู ุดูุฏ. ููฺูู ูุจุงุฏ ุงุฒ ฺฉุงูฺฉุชูุฑ textfile ุจู ุนููุงู ุฑุงู ุจุฑุง ฺฏุฑูุชู ูุชุฑฺฉโูุง ุงุฒ ุณุงุฑ ุงฺฉุณูพูุฑุชุฑูุง ู ุจุฑูุงููโูุง ุฏุฑ ุญุงู ุงุฌุฑุง ุฑู ูุงุดู ู ููุงุด ููู ุขููุง ุฏุฑ `/metrics` ุงฺฉุณูพูุฑุชุฑ ููุฏ ุงุณุชูุงุฏู ฺฉูุฏุ ุจูฺฉู ุจุงุฏ ูพุฑููุชุฆูุณ ูุฑ ุงฺฉุณูพูุฑุชุฑ ู ุจุฑูุงูู ุฑุง ุจู ุตูุฑุช ุฌุฏุงฺฏุงูู ุงุณฺฉุฑููพ ฺฉูุฏ.

### ุงุณุชูุงุฏู ุงุฒ ฺฉุงูฺฉุชูุฑ Textfile

ฺฉุงูฺฉุชูุฑ textfile ุจู ุทูุฑ ูพุดโูุฑุถ ูุนุงู ุงุณุชุ ุงูุง ุจุฑุง ฺฉุงุฑ ฺฉุฑุฏู ุขู ุจุงุฏ ููฺฏ ุฎุท ูุฑูุงู `--collector.textfile.directory` ุฑุง ุจู ุงฺฉุณูพูุฑุชุฑ ููุฏ ุงุฑุงุฆู ุฏูุฏ. ุงู ุจุงุฏ ุจู ุฏุงุฑฺฉุชูุฑ ุงุดุงุฑู ฺฉูุฏ ฺฉู ุตุฑูุงู ุจุฑุง ุงู ููุธูุฑ ุงุณุชูุงุฏู ูโฺฉูุฏ ุชุง ุงุฒ ุงุดุชุจุงูุงุช ุฌููฺฏุฑ ุดูุฏ.

ุจุฑุง ุงูุชุญุงู ฺฉุฑุฏู ุงูุ ุจุงุฏ ฺฉ ุฏุงุฑฺฉุชูุฑ ุงุฌุงุฏ ฺฉูุฏุ ฺฉ ูุงู ุณุงุฏู ุฏุฑ ูุฑูุช ููุงุด (exposition format) ุจููุณุฏ (ููุงูุทูุฑ ฺฉู ุฏุฑ ยซูุฑูุช ููุงุด ูุชูยป ุฏุฑ ุตูุญู ธฐ ุจุญุซ ุดุฏ)ุ ู ุงฺฉุณูพูุฑุชุฑ ููุฏ ุฑุง ุจุง ูพฺฉุฑุจูุฏ ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ุงู ุฏุงุฑฺฉุชูุฑุ ููุงูุทูุฑ ฺฉู ุฏุฑ ูุซุงู ท-ฑ ูุดุงู ุฏุงุฏู ุดุฏู ุงุณุชุ ุดุฑูุน ฺฉูุฏ. ฺฉุงูฺฉุชูุฑ textfile ููุท ุจู ูุงูโูุง ุจุง ูพุณููุฏ `.prom` ูฺฏุงู ูโฺฉูุฏ.

ูุซุงู ท-ฑ. ุงุณุชูุงุฏู ุงุฒ ฺฉุงูฺฉุชูุฑ textfile ุจุง ฺฉ ูุซุงู ุณุงุฏู

```
hostname $ mkdir textfile
hostname $ echo example_metric 1 > textfile/example.prom
hostname $ ./node_exporter --collector.textfile.directory=$PWD/textfile
```

ูุซุงู ท ูุญุชูุง ูุงู ุงุฌุงุฏ ุดุฏู ุชูุณุท ูุซุงู ท-ฑ ุฑุง ูุดุงู ูโุฏูุฏ.
ูุซุงู ท. ูุญุชูุง textfile/example.prom

```
example_metric 1
```

ุงฺฏุฑ ุจู `/metrics` ุงฺฉุณูพูุฑุชุฑ ููุฏ ูฺฏุงู ฺฉูุฏุ ุงฺฉููู ูุชุฑฺฉ ุฎูุฏ ุฑุง ุฎูุงูุฏ ุฏุฏ:

```
# HELP example_metric Metric read from /some/path/textfile/example.prom
# TYPE example_metric untyped
example_metric 1
```

ุงฺฏุฑ ูฺ HELP ุงุฑุงุฆู ูุดูุฏุ ฺฉุงูฺฉุชูุฑ textfile ฺฉ ุจุฑุง ุดูุง ุงุฑุงุฆู ูโุฏูุฏ. ุงฺฏุฑ ููุงู ูุชุฑฺฉ ุฑุง ุฏุฑ ฺูุฏู ูุงู (ุงูุจุชู ุจุง ูุจูโูุง ูุฎุชูู) ูุฑุงุฑ ูโุฏูุฏุ ุจุงุฏ HELP ฺฉุณุงู ุจุฑุง ูุฑ ฺฉุฏุงู ุงุฑุงุฆู ุฏูุฏุ ุฒุฑุง ุฏุฑ ุบุฑ ุงู ุตูุฑุช HELP ูุงูุทุงุจู ุจุงุนุซ ุฎุทุง ูโุดูุฏ.

ูุนูููุงู ุดูุง ูุงูโูุง `.prom` ุฑุง ุจุง ฺฉ ฺฉุฑุงูโุฌุงุจ ุงุฌุงุฏ ู ุจูโุฑูุฒ ูโฺฉูุฏ. ุงุฒ ุขูุฌุง ฺฉู ฺฉ ุงุณฺฉุฑููพ ูโุชูุงูุฏ ุฏุฑ ูุฑ ุฒูุงู ุงุชูุงู ุจูุชุฏุ ููู ุงุณุช ฺฉู ุงฺฉุณูพูุฑุชุฑ ููุฏ ูุงูโูุง ุฑุง ฺฉู ุชุง ุญุฏ ููุดุชู ุดุฏูโุงูุฏ ูุจูุฏ. ุจุฑุง ุงู ููุธูุฑ ุจุงุฏ ุงุจุชุฏุง ุฏุฑ ฺฉ ูุงู ูููุช (temporary file) ุฏุฑ ููุงู ุฏุงุฑฺฉุชูุฑ ุจููุณุฏ ู ุณูพุณ ูุงู ฺฉุงูู ุฑุง ุจู ูุงู ูุงู ููุง ููุชูู (move) ฺฉูุฏ.

ูุซุงู ท-ณ ฺฉ ฺฉุฑุงูโุฌุงุจ ุฑุง ูุดุงู ูโุฏูุฏ ฺฉู ุจู ฺฉุงูฺฉุชูุฑ textfile ุฎุฑูุฌ ูโุฏูุฏ. ุงู ฺฉุฑุงูโุฌุงุจ ูุชุฑฺฉโูุง ุฑุง ุฏุฑ ฺฉ ูุงู ูููุชยนโต ุงุฌุงุฏ ูโฺฉูุฏ ู ูุงู ุขููุง ุฑุง ุจู ูุงู ูุงู ููุง ุชุบุฑ ูโุฏูุฏ. ุงู ฺฉ ูุซุงู ูพุด ูพุง ุงูุชุงุฏู ุงุณุช ฺฉู ุงุฒ ุฏุณุชูุฑุงุช ฺฉูุชุงู ุงุณุชูุงุฏู ูโฺฉูุฏุ ุงูุง ุฏุฑ ุจุดุชุฑ ููุงุฑุฏ ุงุณุชูุงุฏู ูุงูุนุ ูโุฎูุงูุฏ ฺฉ ุงุณฺฉุฑูพุช ุจุฑุง ุฎูุงูุง ูฺฏู ุฏุงุดุชู ููุงุฑุฏ ุงุฌุงุฏ ฺฉูุฏ.

ูุซุงู ท-ณ. ูุงู `/etc/crontab` ฺฉู ุชุนุฏุงุฏ ุฎุทูุท ุฏุฑ `/etc/shadow` ุฑุง ุจู ุนููุงู ูุชุฑฺฉ `shadow_entries` ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉุงูฺฉุชูุฑ textfile ุฏุฑ ูุนุฑุถ ููุงุด ูุฑุงุฑ ูโุฏูุฏ.

`TEXTFILE=/path/to/textfile/directory`

```sh
# ุงู ุจุงุฏ ููู ุฏุฑ ฺฉ ุฎุท ุจุงุดุฏ
*/5 * * * * root (echo -n 'shadow_entries '; grep -c . /etc/shadow) > $TEXTFILE/shadow.prom.$$ && mv $TEXTFILE/shadow.prom.$$ $TEXTFILE/shadow.prom
```

ุชุนุฏุงุฏ ุงุณฺฉุฑูพุช ููููู ุจุฑุง ุงุณุชูุงุฏู ุจุง ฺฉุงูฺฉุชูุฑ textfile ุฏุฑ ูุฎุฒู GitHub ุงุณฺฉุฑูพุชโูุง ููููู ฺฉุงูฺฉุชูุฑ textfile ููุฌูุฏ ุงุณุช.

### ูููุฑูุง ุฒูุงู (Timestamps)

ุฏุฑ ุญุงู ฺฉู ูุฑูุช ููุงุด ุงุฒ ูููุฑูุง ุฒูุงู ูพุดุชุจุงู ูโฺฉูุฏุ ููโุชูุงูุฏ ุงุฒ ุขููุง ุจุง ฺฉุงูฺฉุชูุฑ textfile ุงุณุชูุงุฏู ฺฉูุฏ. ุงู ุจู ุงู ุฏูู ุงุณุช ฺฉู ุงุฒ ูุธุฑ ูุนูุง ููุทู ูุณุชุ ุฒุฑุง ูุชุฑฺฉโูุง ุดูุง ุจุง ููุงู ูููุฑ ุฒูุงู ุณุงุฑ ูุชุฑฺฉโูุง ุงุณฺฉุฑููพ ุธุงูุฑ ููโุดููุฏ. ุฏุฑ ุนูุถุ mtimeยนโถ (ุฒูุงู ุขุฎุฑู ุชุบุฑ) ูุงู ุฏุฑ ูุชุฑฺฉ `node_textfile_mtime_seconds` ุฏุฑ ุฏุณุชุฑุณ ุดูุงุณุช. ูโุชูุงูุฏ ุงุฒ ุงู ุจุฑุง ูุดุฏุงุฑ ุฏุงุฏู ุฏุฑ ููุฑุฏ ฺฉุงุฑ ูฺฉุฑุฏู ฺฉุฑุงูโุฌุงุจโูุง ุฎูุฏ ุงุณุชูุงุฏู ฺฉูุฏุ ุฒุฑุง ุงฺฏุฑ ุงู ููุฏุงุฑ ูุฑุจูุท ุจู ุฒูุงู ุฎู ุฏูุฑ ุจุงุดุฏุ ูโุชูุงูุฏ ูุดุงูโุฏููุฏู ฺฉ ูุดฺฉู ุจุงุดุฏ:

```sh
# HELP node_textfile_mtime_seconds Unixtime mtime of textfiles successfully read.
# TYPE node_textfile_mtime_seconds gauge
node_textfile_mtime_seconds{file="example.prom"} 1.516205651e+09
```

ุงฺฉููู ฺฉู ุงฺฉุณูพูุฑุชุฑ ููุฏ ุฑุง ุฏุฑ ุญุงู ุงุฌุฑุง ุฏุงุฑุฏุ ุจุงุฏ ุจุจูู ฺฺฏููู ูโุชูุงูุฏ ุจู ูพุฑููุชุฆูุณ ุฏุฑ ููุฑุฏ ุชูุงู ูุงุดูโูุง ฺฉู ุขู ุฑุง ุฑู ุขูโูุง ุงุฌุฑุง ูโฺฉูุฏุ ุงุทูุงุน ุฏูุฏ.
